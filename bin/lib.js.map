{"version":3,"file":"lib.js","mappings":"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","sources":[".././node_modules/red-agate-svg-canvas/src/drawing/canvas/SvgCanvas.ts",".././node_modules/red-agate-svg-canvas/src/drawing/canvas/TransferMatrix2D.ts",".././node_modules/red-agate-svg-canvas/src/drawing/canvas/VectorCanvas2D.ts",".././node_modules/red-agate-svg-canvas/src/drawing/canvas/WebColor.ts",".././node_modules/red-agate-svg-canvas/src/index.ts",".././node_modules/red-agate-util/src/convert/Base64.ts",".././node_modules/red-agate-util/src/convert/Escape.ts",".././node_modules/red-agate-util/src/convert/NumberPrecision.ts",".././node_modules/red-agate-util/src/convert/TextEncoding.ts",".././node_modules/red-agate-util/src/convert/WordWrap.ts","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object",".././src/lib.js"],"sourcesContent":["// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\nimport { TextEncoding }          from \"red-agate-util/modules/convert/TextEncoding\";\r\nimport { Base64 }                from \"red-agate-util/modules/convert/Base64\";\r\nimport { Escape }                from \"red-agate-util/modules/convert/Escape\";\r\nimport { WordWrap }              from \"red-agate-util/modules/convert/WordWrap\";\r\nimport { WebColor }              from \"./WebColor\";\r\nimport { VectorCanvas2DGradient,\r\n         VectorCanvas2DPattern,\r\n         VectorCanvas2D }        from \"./VectorCanvas2D\";\r\nimport { Point2D,\r\n         Vector2D,\r\n         Rect2D,\r\n         TransferMatrix2D }      from \"./TransferMatrix2D\";\r\n\r\n\r\nexport interface SvgCanvas2DAsset {\r\n    toDef(): string;\r\n}\r\n\r\n\r\nexport interface SvgTextAttributes {\r\n    /**\r\n     * author's computation of the total sum of all of the advance values\r\n     *  that correspond to character data within this element,\r\n     *  including the advance value on the glyph\r\n     */\r\n    textLength?: number;\r\n    /** 'spacing' | 'spacingAndGlyphs' */\r\n    lengthAdjust?: \"spacing\" | \"spacingAndGlyphs\";\r\n    /** line break on newline(0x0a) */\r\n    multiline?: boolean;\r\n    /**\r\n     * length from baseline to next baseline.\r\n     *  if writingMode is horizontal then add y coodinate.\r\n     *  if writingMode is vertical then add x coodinate.\r\n     */\r\n    lineHeight?: number;\r\n    /** rotation about the current text position (degree) */\r\n    rotate?: number;\r\n    /** 'lr-tb' | 'rl-tb' | 'tb-rl' | 'lr' | 'rl' | 'tb' */\r\n    writingMode?: \"lr-tb\" | \"rl-tb\" | \"tb-rl\" | \"lr\" | \"rl\" | \"tb\";\r\n    /** 'auto' | 0 | 90 | 180 | 270 */\r\n    glyphOrientationVertical?: \"auto\" | number;\r\n    /** 0 | 90 | 180 | 270 */\r\n    glyphOrientationHorizontal?: number;\r\n    /** 'ltr' | 'rtl'  */\r\n    direction?: \"ltr\" | \"rtl\";\r\n    /** 'normal' | 'embed' | 'bidi-override' */\r\n    unicodeBidi?: \"normal\" | \"embed\" | \"bidi-override\";\r\n    /** 'none' | [ 'underline' || 'overline' || 'line-through' ] */\r\n    textDecoration?: string;\r\n    /** use textPath */\r\n    textPath?: boolean;\r\n    /**  */\r\n    textPathOffset?: number;\r\n    /** 'auto' | length */\r\n    kerning?: \"auto\" | number;\r\n    /** 'normal' | length */\r\n    letterSpacing?: \"normal\" | number;\r\n    /** 'normal' | length */\r\n    wordSpacing?: \"normal\" | number;\r\n}\r\n\r\n\r\nexport class SvgCanvasImageData {\r\n    constructor(\r\n        public url: string,\r\n        public x: number, public y: number,\r\n        public width: number, public height: number) {\r\n    }\r\n}\r\n\r\n\r\nexport abstract class SvgCanvas2DGradient {\r\n}\r\n\r\n\r\nexport class SvgCanvas2DLinerGradient extends SvgCanvas2DGradient implements VectorCanvas2DGradient, SvgCanvas2DAsset {\r\n    private content: string;\r\n    constructor(\r\n        private id: string,\r\n        private x0: number, private y0: number, private x1: number, private y1: number) {\r\n        super();\r\n        this.content = `<linearGradient id=\"${id}\" gradientUnits=\"userSpaceOnUse\" x1=\"${x0}\" y1=\"${y0}\" x2=\"${x1}\" y2=\"${y1}\" >\\n`;\r\n    }\r\n    public addColorStop(offset: number, color: string, opacity: number = 1): void {\r\n        this.content += `<stop offset=\"${offset}\" stop-color=\"${color}\" stop-opacity=\"${opacity}\" />\\n`;\r\n    }\r\n    public toDef(): string {\r\n        return this.content + \"</linearGradient>\";\r\n    }\r\n    public toString(): string {\r\n        return `url(#${this.id})`;\r\n    }\r\n}\r\n\r\n\r\nexport class SvgCanvas2DRadialGradient extends SvgCanvas2DGradient implements VectorCanvas2DGradient, SvgCanvas2DAsset {\r\n    private content: string;\r\n    /** fr is ignored. fr is always 0. */\r\n    constructor(\r\n        private id: string,\r\n        private cx: number, private cy: number, private r: number,\r\n        private fx: number, private fy: number) {\r\n        super();\r\n        this.content = `<radialGradient id=\"${id}\" gradientUnits=\"userSpaceOnUse\" cx=\"${cx}\" cy=\"${cy}\" r=\"${r}\" fx=\"${fx}\" fy=\"${fy}\" >\\n`;\r\n    }\r\n    public addColorStop(offset: number, color: string, opacity: number = 1): void {\r\n        this.content += `<stop offset=\"${offset}\" stop-color=\"${color}\" stop-opacity=\"${opacity}\" />\\n`;\r\n    }\r\n    public toDef() {\r\n        return this.content + \"</radialGradient>\";\r\n    }\r\n    public toString() {\r\n        return `url(#${this.id})`;\r\n    }\r\n}\r\n\r\n\r\nexport class SvgCanvas2DPattern implements VectorCanvas2DPattern, SvgCanvas2DAsset {\r\n    constructor(\r\n        private id: string,\r\n        private imageData: SvgCanvasImageData) {\r\n    }\r\n    public toDef() {\r\n        const content =\r\n            `<image x=\"0\" y=\"0\" width=\"${this.imageData.width}\" height=\"${this.imageData.height}\" \\n` +\r\n            `xlink:href=\"${this.imageData.url}\" />`;\r\n        return `<pattern id=\"${this.id}\"  patternUnits=\"userSpaceOnUse\" patternContentUnits=\"userSpaceOnUse\" ` +\r\n            `x=\"${this.imageData.x}\" y=\"${this.imageData.y}\" ` +\r\n            `width=\"${this.imageData.width}\" height=\"${this.imageData.height}\">${content}</pattern>`;\r\n    }\r\n    public toString() {\r\n        return `url(#${this.id})`;\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * canvas: source-over|source-in|source-out|source-atop|\r\n *         destination-over|destination-in|destination-out|destination-atop|\r\n *         lighter|copy|xor\r\n *    svg: over|in|out|atop|xor|arithmetic\r\n */\r\nexport type GlobalCompositeOperationValue =\r\n    \"source-over\" | \"source-in\" | \"source-out\" | \"source-atop\" |\r\n    \"destination-over\" | \"destination-in\" | \"destination-out\" | \"destination-atop\" |\r\n    \"lighter\" | \"copy\" | \"xor\" |\r\n    \"over\" | \"in\" | \"out\" | \"atop\" | \"arithmetic\";\r\n\r\n/**\r\n * text-anchor\r\n * canvas:start|end|left|right|center\r\n *    svg:start|middle|end\r\n */\r\nexport type TextAlignValue =\r\n    \"start\" | \"end\" | \"left\" | \"right\" | \"center\" | \"middle\";\r\n\r\n/**\r\n * dominant-baseline\r\n * canvas:top|hanging|middle|alphabetic|ideographic|bottom\r\n *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\r\n *        ('auto' is default. 'auto's effective value is depends on writing mode. if mode is horizontal then it is alphabetic. else then it is central)\r\n *\r\n * --------------------  text-before-edge (em square's edge)\r\n * --                --  hanging\r\n * --  X        X    --  mathematical\r\n *     X\r\n *     X        X\r\n * --  XXXX     X    --  central (em square's central), nearby of x-height(alphabetic lower case height)\r\n * --  X   X    X    --  middle (1/2 x-height)\r\n * --  X   X    X    --  alphabetic\r\n *            pp\r\n * -----------^^-------  ideographic, text-after-edge (em square's edge)\r\n */\r\nexport type TextBaselineValue =\r\n    \"top\" | \"hanging\" | \"middle\" | \"alphabetic\" | \"ideographic\" | \"bottom\" |\r\n    \"auto\" | \"use-script\" | \"no-change\" | \"reset-size\" |\r\n    \"mathematical\" | \"central\" | \"text-after-edge\" | \"text-before-edge\";\r\n\r\n/**\r\n * stroke-linecap\r\n * butt|round|square\r\n */\r\nexport type LineCapValue = \"butt\" | \"round\" | \"square\";\r\n\r\n/**\r\n * stroke-linejoin\r\n * miter|round|bevel\r\n */\r\nexport type LineJoinValue = \"miter\" | \"round\" | \"bevel\";\r\n\r\n\r\nclass SvgCanvasGraphicState {\r\n    public globalAlpha: number = 1;\r\n\r\n    /**\r\n     * canvas: source-over|source-in|source-out|source-atop|\r\n     *         destination-over|destination-in|destination-out|destination-atop|\r\n     *         lighter|copy|xor\r\n     *    svg: over|in|out|atop|xor|arithmetic\r\n     */\r\n    public globalCompositeOperation: GlobalCompositeOperationValue = \"source-over\";\r\n\r\n    public shadowBlur: number = 0;\r\n    /**\r\n     * canvas   : <'web-color'>|#000|#000000|rgb(0,0,0)|rgba(0,0,0,0)\r\n     * SvgCanvas: rgb(0,0,0)|rgba(0,0,0,0)\r\n     */\r\n    public shadowColor: string = \"rgba(0,0,0,1)\";\r\n    public shadowOffsetX: number = 0;\r\n    public shadowOffsetY: number = 0;\r\n\r\n    public filterIdUrl: string | null = null;\r\n\r\n    /**\r\n     * canvas: \"italic bold 26px 'Times New Roman'\"\r\n     *    svg: font-family =\"Times New Roman\"\r\n     *         font-style  =normal|italic|oblique\r\n     *         font-variant=normal|small-caps\r\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\r\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\r\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\r\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\r\n     *         font-size-adjust=<number>|none\r\n     *         font        =[[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>]\r\n     */\r\n    public font: string = \"normal 12px 'Times New Roman'\";\r\n    /**\r\n     * text-anchor\r\n     * canvas:start|end|left|right|center\r\n     *    svg:start|middle|end\r\n     */\r\n    public textAlign: TextAlignValue = \"start\";\r\n    /**\r\n     * dominant-baseline\r\n     * default is 'auto'.\r\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\r\n     *        ('alphabetic' is default)\r\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\r\n     *        ('auto' is default. 'auto's effective value is depends on writing mode. if mode is horizontal then it is alphabetic. else then it is central)\r\n     */\r\n    public textBaseline: TextBaselineValue = \"auto\";\r\n\r\n    /**\r\n     * stroke-linecap\r\n     * butt|round|square\r\n     */\r\n    public lineCap: LineCapValue = \"butt\";\r\n    public lineDashOffset: number = 0;\r\n    /**\r\n     * stroke-linejoin\r\n     * miter|round|bevel\r\n     */\r\n    public lineJoin: LineJoinValue = \"miter\";\r\n    public lineWidth: number = 1;\r\n    public miterLimit: number = 4;\r\n\r\n    public strokeStyle: string = \"black\";\r\n    public fillStyle: string = \"black\";\r\n\r\n    public ctm: TransferMatrix2D = new TransferMatrix2D();\r\n    public currentPoint: Point2D | null = null;\r\n    public currentPointOnCtm: Point2D | null = null;\r\n    public subpath: Array<string | number | Point2D> = [];\r\n\r\n    public lineDash: number[] = [];\r\n    public clipPath: string = \"\";\r\n\r\n    constructor(src?: SvgCanvasGraphicState) {\r\n        if (! src) return;\r\n        for (const key in this) {\r\n            if (this.hasOwnProperty(key) && src.hasOwnProperty(key)) {\r\n                (this as any)[key] = (src as any)[key];\r\n            }\r\n        }\r\n        this.subpath = Array.from(this.subpath);\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * subset of CanvasRenderingContext2D\r\n */\r\nexport class SvgCanvas implements VectorCanvas2D {\r\n    public get globalAlpha(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].globalAlpha;\r\n    }\r\n    public set globalAlpha(value: number) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].globalAlpha = value;\r\n    }\r\n\r\n    public get globalCompositeOperation(): GlobalCompositeOperationValue {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].globalCompositeOperation;\r\n    }\r\n    public set globalCompositeOperation(value: GlobalCompositeOperationValue) {\r\n        this.filterIdUrl = null;\r\n        this.graphicsStack[this.graphicsStack.length - 1].globalCompositeOperation = value;\r\n    }\r\n\r\n    public get shadowBlur(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowBlur;\r\n    }\r\n    public set shadowBlur(value: number) {\r\n        this.filterIdUrl = null;\r\n        this.graphicsStack[this.graphicsStack.length - 1].shadowBlur = value;\r\n    }\r\n    public get shadowColor(): string {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowColor;\r\n    }\r\n    public set shadowColor(value: string) {\r\n        this.filterIdUrl = null;\r\n        this.graphicsStack[this.graphicsStack.length - 1].shadowColor = value;\r\n    }\r\n    public get shadowOffsetX(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetX;\r\n    }\r\n    public set shadowOffsetX(value: number) {\r\n        this.filterIdUrl = null;\r\n        this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetX = value;\r\n    }\r\n    public get shadowOffsetY(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetY;\r\n    }\r\n    public set shadowOffsetY(value: number) {\r\n        this.filterIdUrl = null;\r\n        this.graphicsStack[this.graphicsStack.length - 1].shadowOffsetY = value;\r\n    }\r\n    private get filterIdUrl(): string | null {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].filterIdUrl;\r\n    }\r\n    private set filterIdUrl(value: string | null) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].filterIdUrl = value;\r\n    }\r\n\r\n    /**\r\n     * canvas: \"italic bold 26px 'Times New Roman'\"\r\n     *    svg: font-family =\"Times New Roman\"\r\n     *         font-style  =normal|italic|oblique\r\n     *         font-variant=normal|small-caps\r\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\r\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\r\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\r\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\r\n     *         font-size-adjust=<number>|none\r\n     *         font        =[[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>]\r\n     */\r\n    public get font(): string {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].font;\r\n    }\r\n    /**\r\n     * canvas: \"italic bold 26px 'Times New Roman'\"\r\n     *         [<‘font-style’>||<font-variant>||<‘font-weight’>||<‘font-stretch’>]?<‘font-size’>[/<‘line-height’>]?<‘font-family’>\r\n     *\r\n     *    svg: font-family =\"Times New Roman\"\r\n     *         font-style  =normal|italic|oblique\r\n     *         font-variant=normal|small-caps\r\n     *         font-weight =normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900\r\n     *         font-stretch=normal|wider|narrower|ultra-condensed|extra-condensed|condensed|\r\n     *                      semi-condensed|semi-expanded|expanded|extra-expanded|ultra-expanded\r\n     *         font-size   =<absolute-size>|<relative-size>|<length>|<percentage>\r\n     *         font-size-adjust=<number>|none\r\n     *         font        =[<'font-style'>||<'font-variant'>||<'font-weight'>]?<'font-size'>[/<'line-height'>]?<'font-family'>\r\n     */\r\n    public set font(value: string) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].font = value;\r\n    }\r\n    /**\r\n     * text-anchor\r\n     * canvas:start|end|left|right|center\r\n     *    svg:start|middle|end\r\n     */\r\n    public get textAlign(): TextAlignValue {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].textAlign;\r\n    }\r\n    /**\r\n     * text-anchor\r\n     * canvas:start|end|left|right|center\r\n     *    svg:start|middle|end\r\n     */\r\n    public set textAlign(value: TextAlignValue) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].textAlign = value;\r\n    }\r\n    /**\r\n     * dominant-baseline\r\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\r\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\r\n     */\r\n    public get textBaseline(): TextBaselineValue {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].textBaseline;\r\n    }\r\n    /**\r\n     * dominant-baseline\r\n     * canvas:top|hanging|middle|alphabetic|ideographic|bottom\r\n     *    svg:auto|use-script|no-change|reset-size|ideographic|alphabetic|hanging|mathematical|central|middle|text-after-edge|text-before-edge\r\n     */\r\n    public set textBaseline(value: TextBaselineValue) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].textBaseline = value;\r\n    }\r\n\r\n    /**\r\n     * stroke-linecap\r\n     * butt|round|square\r\n     */\r\n    public get lineCap(): LineCapValue {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].lineCap;\r\n    }\r\n    /**\r\n     * stroke-linecap\r\n     * butt|round|square\r\n     */\r\n    public set lineCap(value: LineCapValue) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].lineCap = value;\r\n    }\r\n    public get lineDashOffset(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].lineDashOffset;\r\n    }\r\n    public set lineDashOffset(value: number) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].lineDashOffset = value;\r\n    }\r\n    /**\r\n     * stroke-linejoin\r\n     * miter|round|bevel\r\n     */\r\n    public get lineJoin(): LineJoinValue {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].lineJoin;\r\n    }\r\n    /**\r\n     * stroke-linejoin\r\n     * miter|round|bevel\r\n     */\r\n    public set lineJoin(value: LineJoinValue) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].lineJoin = value;\r\n    }\r\n    public get lineWidth(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].lineWidth;\r\n    }\r\n    public set lineWidth(value: number) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].lineWidth = value;\r\n    }\r\n    public get miterLimit(): number {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].miterLimit;\r\n    }\r\n    public set miterLimit(value: number) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].miterLimit = value;\r\n    }\r\n\r\n    public get strokeStyle(): string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].strokeStyle;\r\n    }\r\n    public set strokeStyle(value: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].strokeStyle = value.toString();\r\n    }\r\n    public get fillStyle(): string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].fillStyle;\r\n    }\r\n    public set fillStyle(value: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].fillStyle = value.toString();\r\n    }\r\n\r\n    private get ctm(): TransferMatrix2D {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].ctm;\r\n    }\r\n    private set ctm(value: TransferMatrix2D) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].ctm = value;\r\n    }\r\n    private get currentPoint(): Point2D | null {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].currentPoint;\r\n    }\r\n    private set currentPoint(value: Point2D | null) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].currentPoint = value;\r\n    }\r\n    private get currentPointOnCtm(): Point2D | null {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].currentPointOnCtm;\r\n    }\r\n    private set currentPointOnCtm(value: Point2D | null) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].currentPointOnCtm = value;\r\n    }\r\n    private get subpath(): Array<string | number | Point2D> {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].subpath;\r\n    }\r\n    private set subpath(value: Array<string | number | Point2D>) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].subpath = value;\r\n    }\r\n\r\n    private get lineDash(): number[] {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].lineDash;\r\n    }\r\n    private set lineDash(value: number[]) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].lineDash = value;\r\n    }\r\n    private get clipPath(): string {\r\n        return this.graphicsStack[this.graphicsStack.length - 1].clipPath;\r\n    }\r\n    private set clipPath(value: string) {\r\n        this.graphicsStack[this.graphicsStack.length - 1].clipPath = value;\r\n    }\r\n\r\n    private get subpathIsEmptyOrClosed(): boolean {\r\n        return this.subpath.length === 0 || this.subpath[this.subpath.length - 1] === \"Z\";\r\n    }\r\n\r\n    private graphicsStack: SvgCanvasGraphicState[] = [];\r\n    private assets: Array<SvgCanvas2DAsset | string> = [];\r\n    private content = \"\";\r\n    private contentSaved = \"\";\r\n    private idCount = 0;\r\n    private template: string | null = null;\r\n\r\n    constructor() {\r\n        this.graphicsStack.push(new SvgCanvasGraphicState());\r\n    }\r\n\r\n    public static fromTemplate(template: string): SvgCanvas {\r\n        const c = new SvgCanvas();\r\n        c.template = template;\r\n        c.idCount = new Date().getTime();\r\n        return c;\r\n    }\r\n\r\n    public render(viewbox: Rect2D, unit: string = \"mm\"): string {\r\n        const svgns = `xmlns=\"http://www.w3.org/2000/svg\"`;\r\n        const xlinkns = `xmlns:xlink=\"http://www.w3.org/1999/xlink\"`;\r\n        const vbox = `viewBox=\"${viewbox.x} ${viewbox.y} ${viewbox.w} ${viewbox.h}\"`;\r\n        const defs = `<defs>\\n${\r\n                this.assets.map(x => typeof x === \"string\" ? x : x.toDef()).join(\"\\n\")\r\n            }</defs>`;\r\n\r\n        if (! this.template) {\r\n            return `<svg ${svgns} ${xlinkns} version=\"1.1\" width=\"${viewbox.w}${unit}\" height=\"${viewbox.h}${unit}\" ${vbox}>\\n${\r\n                defs}\\n${this.contentSaved}${this.content}</svg>`;\r\n        } else {\r\n            let tmpl = this.template.replace(/<\\/svg>\\s*$/, '');\r\n\r\n            {\r\n                const re = /(<svg[^>]*?)\\s+?width\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\r\n                if (re.test(tmpl)) {\r\n                    tmpl = tmpl.replace(re, `$1 width=\"${viewbox.w}${unit}\"$2`);\r\n                } else {\r\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg width=\"${viewbox.w}${unit}\" `);\r\n                }\r\n            }\r\n            {\r\n                const re = /(<svg[^>]*?)\\s+?height\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\r\n                if (re.test(tmpl)) {\r\n                    tmpl = tmpl.replace(re, `$1 height=\"${viewbox.h}${unit}\"$2`);\r\n                } else {\r\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg height=\"${viewbox.h}${unit}\" `);\r\n                }\r\n            }\r\n            {\r\n                const re = /(<svg[^>]*?)\\s+?viewBox\\s*?=\\s*?[\"'](?:[^\"'>]+?)[\"']([^>]*?>)/;\r\n                if (re.test(tmpl)) {\r\n                    tmpl = tmpl.replace(re, `$1 ${vbox}$2`);\r\n                } else {\r\n                    tmpl = tmpl.replace(/<svg\\s/, `<svg ${vbox} `);\r\n                }\r\n            }\r\n\r\n            if (! tmpl.match(/<svg[^>]*?\\s+?xmlns:xlink\\s*?=/)) {\r\n                tmpl = tmpl.replace(/<svg\\s/, `<svg ${xlinkns} `);\r\n            }\r\n            if (! tmpl.match(/<svg[^>]*?\\s+?xmlns\\s*?=/)) {\r\n                tmpl = tmpl.replace(/<svg\\s/, `<svg ${svgns} `);\r\n            }\r\n\r\n            return `${tmpl}\\n${defs}\\n${this.contentSaved}${this.content}</svg>`;\r\n        }\r\n    }\r\n\r\n    public toDataUrl(viewbox: Rect2D, unit: string = \"mm\", lineLength: number = 120): string {\r\n        return \"data:image/svg+xml;base64,\" +\r\n            Base64.encode(TextEncoding.encodeToUtf8(this.render(viewbox, unit)), lineLength);\r\n    }\r\n\r\n    /** postscript gsave */\r\n    public save(): void {\r\n        const s = new SvgCanvasGraphicState(this.graphicsStack[this.graphicsStack.length - 1]);\r\n        this.graphicsStack.push(s);\r\n    }\r\n    /** postscript grestore */\r\n    public restore(restorePath: boolean = false): void {\r\n        if (restorePath) {\r\n            if (0 < this.graphicsStack.length) this.graphicsStack.pop();\r\n        } else {\r\n            if (0 < this.graphicsStack.length) {\r\n                const subpath = this.subpath;\r\n                const cpt = this.currentPoint;\r\n                const cptoctm = this.currentPointOnCtm;\r\n\r\n                this.graphicsStack.pop();\r\n\r\n                this.subpath = subpath;\r\n                this.currentPoint = cpt;\r\n                this.currentPointOnCtm = cptoctm;\r\n            }\r\n        }\r\n    }\r\n\r\n    /** postscript x y scale */\r\n    public scale(x: number, y: number): void {\r\n        if (this.currentPointOnCtm !== null) {\r\n            const tm = new TransferMatrix2D().scale(x, y);\r\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\r\n        }\r\n        this.ctm = this.ctm.scale(x, y);\r\n    }\r\n    /** postscript x y translate */\r\n    public translate(x: number, y: number): void {\r\n        if (this.currentPointOnCtm !== null) {\r\n            const tm = new TransferMatrix2D().translate(x, y);\r\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\r\n        }\r\n        this.ctm = this.ctm.translate(x, y);\r\n    }\r\n    /** postscript (angle*180/PI) rotate */\r\n    public rotate(angle: number): void {\r\n        if (this.currentPointOnCtm !== null) {\r\n            const tm = new TransferMatrix2D().rotate(angle);\r\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\r\n        }\r\n        this.ctm = this.ctm.rotate(angle);\r\n    }\r\n    /** postscript [m11 m12 m21 m22 dx dy] concat */\r\n    public transform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void {\r\n        const tm = new TransferMatrix2D(m11, m12, m21, m22, dx, dy);\r\n        if (this.currentPointOnCtm !== null)\r\n            this.currentPointOnCtm = tm.transfer(this.currentPointOnCtm);\r\n        this.ctm = this.ctm.concat(tm);\r\n    }\r\n    /** postscript [m11 m12 m21 m22 dx dy] setmatrix */\r\n    public setTransform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void {\r\n        this.currentPointOnCtm = null;\r\n        this.ctm = new TransferMatrix2D(m11, m12, m21, m22, dx, dy);\r\n    }\r\n\r\n    /** postscript newpath */\r\n    public beginPath(): void {\r\n        this.subpath = [];\r\n        this.currentPoint = null;\r\n        this.currentPointOnCtm = null;\r\n    }\r\n    /** postscript closepath */\r\n    public closePath(): void {\r\n        this.subpath.push(\"Z\");\r\n        this.currentPoint = null;\r\n        this.currentPointOnCtm = null;\r\n    }\r\n\r\n    /** postscript x y moveto */\r\n    public moveTo(x: number, y: number): void {\r\n        const p = new Point2D(x, y);\r\n        this.subpath.push(\"M\", this.ctm.transfer(p));\r\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\r\n        this.currentPointOnCtm = p;\r\n    }\r\n    /** postscript x y lineto */\r\n    public lineTo(x: number, y: number, ...extra: number[]): void {\r\n        let p = new Point2D(x, y);\r\n        this.subpath.push(\"L\", this.ctm.transfer(p));\r\n        if (extra && extra.length % 4 === 0) {\r\n            for (let i = 0; i < extra.length; i += 2) {\r\n                if (extra.length <= (i + 1)) break;\r\n                p = new Point2D(extra[i], extra[i + 1]);\r\n                this.subpath.push(this.ctm.transfer(p));\r\n            }\r\n        }\r\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\r\n        this.currentPointOnCtm = p;\r\n    }\r\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, ...extra: number[]): void {\r\n        let p = new Point2D(x, y);\r\n        this.subpath.push(\"Q\",\r\n            this.ctm.transfer(new Point2D(cpx, cpy)),\r\n            this.ctm.transfer(p));\r\n        if (extra && extra.length % 4 === 0) {\r\n            for (let i = 0; i < extra.length; i += 2) {\r\n                if (extra.length <= (i + 1)) break;\r\n                p = new Point2D(extra[i], extra[i + 1]);\r\n                this.subpath.push(this.ctm.transfer(p));\r\n            }\r\n        }\r\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\r\n        this.currentPointOnCtm = p;\r\n    }\r\n    /** postscript cp1x cp1y cp2x cp2y x y curveto */\r\n    public bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, ...extra: number[]): void {\r\n        let p = new Point2D(x, y);\r\n        this.subpath.push(\"C\",\r\n            this.ctm.transfer(new Point2D(cp1x, cp1y)),\r\n            this.ctm.transfer(new Point2D(cp2x, cp2y)),\r\n            this.ctm.transfer(p));\r\n        if (extra && extra.length % 6 === 0) {\r\n            for (let i = 0; i < extra.length; i += 2) {\r\n                p = new Point2D(extra[i], extra[i + 1]);\r\n                this.subpath.push(this.ctm.transfer(p));\r\n            }\r\n        }\r\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\r\n        this.currentPointOnCtm = p;\r\n    }\r\n\r\n    /**\r\n     * postscript arc / arcn\r\n     * anticlockwise= true: x y startAngle endAngle arc\r\n     * anticlockwise=false: x y startAngle endAngle arcn\r\n     * center: (x,y)\r\n     */\r\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean = false): void {\r\n        const entired = Math.abs(endAngle - startAngle) >= (2 * Math.PI);\r\n\r\n        if (Math.abs(startAngle) > (2 * Math.PI)) startAngle = startAngle % (2 * Math.PI);\r\n        if (startAngle < 0)                       startAngle = (2 * Math.PI) + startAngle;\r\n        if (Math.abs(endAngle)   > (2 * Math.PI)) endAngle   = endAngle   % (2 * Math.PI);\r\n        if (endAngle   < 0)                       endAngle   = (2 * Math.PI) + endAngle  ;\r\n\r\n        if (entired) {\r\n            endAngle = startAngle + (2 * Math.PI);\r\n        } else {\r\n            if (anticlockwise) {\r\n                [startAngle, endAngle] = [endAngle, startAngle];\r\n            }\r\n            if (endAngle < startAngle) {\r\n                endAngle = endAngle + (2 * Math.PI);\r\n            }\r\n        }\r\n        let angle = endAngle - startAngle;\r\n        let r = 0;\r\n        const PI_2 = Math.PI / 2;\r\n\r\n        // approximate the arc by a Bezier curve.\r\n        const k0 = (4 * (Math.sqrt(2) - 1)) / 3; // 0.55228474983...\r\n        const tm0 = new TransferMatrix2D().translate(x, y).scale(radius, radius);\r\n\r\n        let points: Point2D[] = [];\r\n\r\n        // tslint:disable-next-line:ban-comma-operator\r\n        for (; PI_2 < angle; r += PI_2, angle -= PI_2) {\r\n            const tm = tm0.rotate(startAngle + r);\r\n\r\n            if (points.length === 0)\r\n                points.push(tm.transfer(new Point2D(1, 0)));\r\n\r\n            points.push(tm.transfer(new Point2D( 1, k0)));\r\n            points.push(tm.transfer(new Point2D(k0,  1)));\r\n            points.push(tm.transfer(new Point2D( 0,  1)));\r\n        }\r\n\r\n        const k1 = (4 * Math.tan(angle / 4)) / 3;\r\n        {\r\n            const tm = tm0.rotate(startAngle + r);\r\n\r\n            if (points.length === 0)\r\n                points.push(tm.transfer(new Point2D(1, 0)));\r\n\r\n            points.push(tm.transfer(new Point2D(1, k1)));\r\n            points.push(tm.transfer(\r\n                new Point2D(\r\n                    Math.cos(angle) + k1 * Math.sin(angle),\r\n                    Math.sin(angle) - k1 * Math.cos(angle))));\r\n            points.push(tm.transfer(\r\n                new Point2D(\r\n                    Math.cos(angle),\r\n                    Math.sin(angle))));\r\n        }\r\n        if (anticlockwise) points = points.reverse();\r\n\r\n        const p = points[points.length - 1];\r\n        points = points.map(pt => this.ctm.transfer(pt));\r\n        this.subpath.push(this.subpathIsEmptyOrClosed ? \"M\" : \"L\", points.shift() as Point2D, \"C\");\r\n        this.subpath.push(...points);\r\n        this.currentPoint = this.subpath[this.subpath.length - 1] as Point2D;\r\n        this.currentPointOnCtm = p;\r\n    }\r\n\r\n    /** postscript x1 y1 x2 y2 arcto */\r\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void {\r\n        const p0 = this.currentPointOnCtm;\r\n        if (p0 === null) {\r\n            return;\r\n        }\r\n\r\n        const p1 = new Point2D(x1, y1);\r\n        const p2 = new Point2D(x2, y2);\r\n\r\n        const v1 = Vector2D.fromPoints(p0, p1);\r\n        const v2 = Vector2D.fromPoints(p1, p2);\r\n\r\n        if ((v1.x === 0 && v2.x === 0) || (v1.y === 0 && v2.y === 0) ||\r\n            v1.isZero() || v2.isZero()) {\r\n            this.subpath.push(\"L\", this.ctm.transfer(p1), this.ctm.transfer(p2));\r\n            this.currentPointOnCtm = p2;\r\n            return;\r\n        }\r\n\r\n        const arcAngle = Vector2D.getAngle(v1, v2);\r\n        if (arcAngle === 0 || arcAngle === Math.PI) {\r\n            this.subpath.push(\"L\", this.ctm.transfer(p1), this.ctm.transfer(p2));\r\n            this.currentPointOnCtm = p2;\r\n            return;\r\n        }\r\n        const linesAngle = Math.PI - arcAngle;\r\n\r\n        const a = radius / Math.sin(linesAngle / 2);\r\n        const b = Math.abs(Math.cos(linesAngle / 2) * a);\r\n\r\n        let vang1 = Vector2D.fromPoints(p1, p0).getAngle();\r\n        let vang2 = v2.getAngle();\r\n\r\n        const cp1 = new Point2D(\r\n            b * Math.cos(vang1) + p1.x,\r\n            b * Math.sin(vang1) + p1.y);\r\n        const cp2 = new Point2D(\r\n            b * Math.cos(vang2) + p1.x,\r\n            b * Math.sin(vang2) + p1.y);\r\n        if (Math.abs(vang2 - vang1) > Math.PI) {\r\n            if (vang2 > vang1) vang1 += Math.PI * 2;\r\n            else               vang2 += Math.PI * 2;\r\n        }\r\n        const center = new Point2D(\r\n            a * Math.cos((vang1 + vang2) / 2) + p1.x,\r\n            a * Math.sin((vang1 + vang2) / 2) + p1.y);\r\n\r\n        const vcp1 = Vector2D.fromPoints(center, cp1);\r\n        const vcp2 = Vector2D.fromPoints(center, cp2);\r\n        let angcp1 = vcp1.getAngle();\r\n        let angcp2 = vcp2.getAngle();\r\n        if (Math.abs(angcp2 - angcp1) > Math.PI) {\r\n            if (angcp2 > angcp1) angcp1 += Math.PI * 2;\r\n            else                 angcp2 += Math.PI * 2;\r\n        }\r\n\r\n        // this.subpath.push(\"L\", this.ctm.transfer(cp1), this.ctm.transfer(center), this.ctm.transfer(cp2)); // debug\r\n        this.arc(center.x, center.y, radius, angcp1, angcp2, angcp1 >= angcp2);\r\n        this.lineTo(x2, y2);\r\n    }\r\n\r\n    public circle(x: number, y: number, radius: number, anticlockwise: boolean = true): void {\r\n        if (! this.subpathIsEmptyOrClosed) this.closePath();\r\n        this.arc(x, y, radius, 0, 2 * Math.PI, anticlockwise);\r\n        this.closePath();\r\n    }\r\n\r\n    public rect(x: number, y: number, w: number, h: number, anticlockwise: boolean = true): void {\r\n        if (anticlockwise) {\r\n            this.subpath.push(\r\n                \"M\", this.ctm.transfer(new Point2D(x, y)), \"L\",\r\n                this.ctm.transfer(new Point2D(x, y + h)), this.ctm.transfer(new Point2D(x + w, y + h)),\r\n                this.ctm.transfer(new Point2D(x + w, y)), \"Z\"\r\n                );\r\n        } else {\r\n            this.subpath.push(\r\n                \"M\", this.ctm.transfer(new Point2D(x, y)), \"L\",\r\n                this.ctm.transfer(new Point2D(x + w, y)), this.ctm.transfer(new Point2D(x + w, y + h)),\r\n                this.ctm.transfer(new Point2D(x, y + h)), \"Z\"\r\n                );\r\n        }\r\n        this.currentPoint = null;\r\n        this.currentPointOnCtm = null;\r\n    }\r\n\r\n    public roundRect(x: number, y: number, w: number, h: number, radius: number, anticlockwise: boolean = true): void {\r\n        if (anticlockwise) {\r\n            this.moveTo(x        , y + h / 2);\r\n            this. arcTo(x        , y + h    , x + w / 2, y + h    , radius);\r\n            this. arcTo(x + w    , y + h    , x + w    , y + h / 2, radius);\r\n            this. arcTo(x + w    , y        , x + w / 2, y        , radius);\r\n            this. arcTo(x        , y        , x        , y + h / 2, radius);\r\n        } else {\r\n            this.moveTo(x + w / 2, y        );\r\n            this. arcTo(x + w    , y        , x + w    , y + h / 2, radius);\r\n            this. arcTo(x + w    , y + h    , x + w / 2, y + h    , radius);\r\n            this. arcTo(x        , y + h    , x        , y + h / 2, radius);\r\n            this. arcTo(x        , y        , x + w / 2, y        , radius);\r\n        }\r\n        this.closePath();\r\n    }\r\n\r\n    private getInheritedStyle(style: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern):\r\n            {style: string | SvgCanvas2DLinerGradient | SvgCanvas2DRadialGradient | SvgCanvas2DPattern, alpha: number} {\r\n\r\n        let found: RegExpMatchArray | null;\r\n        const styleStr = style.toString();\r\n        let alpha = this.globalAlpha;\r\n\r\n        let color: {r: number, g: number, b: number, a: number} | {h: number, s: number, l: number, a: number} | boolean;\r\n\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        if (color = WebColor.isRgb(styleStr)) {\r\n            const rgba = color as {r: number, g: number, b: number, a: number};\r\n            alpha *= rgba.a;\r\n            style = `rgb(${rgba.r},${rgba.g},${rgba.b})`;\r\n        }\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        else if (color = WebColor.isHsl(styleStr)) {\r\n            const hsla = color as {h: number, s: number, l: number, a: number};\r\n            alpha *= hsla.a;\r\n            style = `hsl(${hsla.h},${hsla.s * 100}%,${hsla.l * 100}%)`;\r\n        }\r\n        else if (! this.ctm.isIdentity()) {\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (found = styleStr.match(/^url\\(\\#lgrad-(.+)\\)$/)) {\r\n                this.assets.push(\r\n                    `<linearGradient id=\"lgrad-${++this.idCount}\" xlink:href=\"#lgrad-${found[1]}\" ` +\r\n                    `gradientTransform=\"matrix(${this.ctm.toString()})\" />`);\r\n                style = `url(#lgrad-${this.idCount})`;\r\n            }\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            else if (found = styleStr.match(/^url\\(\\#rgrad-(.+)\\)$/)) {\r\n                this.assets.push(\r\n                    `<radialGradient id=\"rgrad-${++this.idCount}\" xlink:href=\"#rgrad-${found[1]}\" ` +\r\n                    `gradientTransform=\"matrix(${this.ctm.toString()})\" />`);\r\n                style = `url(#rgrad-${this.idCount})`;\r\n            }\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            else if (found = styleStr.match(/^url\\(\\#pat-(.+)\\)$/)) {\r\n                this.assets.push(\r\n                    `<pattern id=\"pat-${++this.idCount}\" xlink:href=\"#pat-${found[1]}\" ` +\r\n                    `patternTransform=\"matrix(${this.ctm.toString()})\" />`);\r\n                style = `url(#pat-${this.idCount})`;\r\n            }\r\n        }\r\n        return {style, alpha};\r\n    }\r\n\r\n    private getStrokeAttrs(): string {\r\n        const styleAndAlpha = this.getInheritedStyle(this.strokeStyle);\r\n        return `stroke=\"${styleAndAlpha.style}\" stroke-width=\"${this.lineWidth}\" ` +\r\n            `stroke-linecap=\"${this.lineCap}\" stroke-linejoin=\"${this.lineJoin}\" stroke-miterlimit=\"${this.miterLimit}\" ` +\r\n            (this.getLineDash().length > 0 ?\r\n                `stroke-dasharray=\"${this.getLineDash().join(\",\")}\" stroke-dashoffset=\"${this.lineDashOffset}\" ` : \"\") +\r\n            `stroke-opacity=\"${styleAndAlpha.alpha}\" `;\r\n    }\r\n    private getFillAttrs(fillRule: string): string {\r\n        const styleAndAlpha = this.getInheritedStyle(this.fillStyle);\r\n        return `fill=\"${styleAndAlpha.style}\" fill-rule=\"${fillRule}\" fill-opacity=\"${styleAndAlpha.alpha}\" `;\r\n    }\r\n\r\n    private getFilterAttrs(): string {\r\n        if (this.filterIdUrl === \"\") {\r\n            // do nothing.\r\n        } else if (this.filterIdUrl === null) {\r\n            if (0 < this.shadowBlur || (\r\n                this.globalCompositeOperation &&\r\n                this.globalCompositeOperation !== \"source-over\")) {\r\n\r\n                let content = \"\";\r\n                let merge   = \"\";\r\n\r\n                if (0 < this.shadowBlur) {\r\n                    content +=\r\n                        `<feGaussianBlur stdDeviation=\"${this.shadowBlur}\" result=\"blur\" />\\n` +\r\n                        `<feOffset in=\"blur\" dx=\"${this.shadowOffsetX}\" dy=\"${this.shadowOffsetY}\" result=\"offsetBlur\" />\\n`;\r\n                    if (this.shadowColor === null) {\r\n                        merge +=\r\n                            `<feMergeNode in=\"offsetBlur\" />`;\r\n                    } else {\r\n                        const c = new WebColor(this.shadowColor);\r\n                        content +=\r\n                            `<feColorMatrix in=\"offsetBlur\" type=\"matrix\" values=\"` +\r\n                            ` 1 1 1 0 0 ` +\r\n                            ` 1 1 1 0 0 ` +\r\n                            ` 1 1 1 0 0 ` +\r\n                            ` 0 0 0 1 0 \" result=\"color1\" />\\n` +\r\n                            `<feColorMatrix in=\"color1\" type=\"matrix\" values=\"` +\r\n                            ` ${c.r / 255} 0 0 0 0 ` +\r\n                            ` 0 ${c.g / 255} 0 0 0 ` +\r\n                            ` 0 0 ${c.b / 255} 0 0 ` +\r\n                            ` 0 0 0 ${c.a} 0 \" result=\"color2\" />\\n`;\r\n                        merge +=\r\n                            `<feMergeNode in=\"color2\" />\\n`;\r\n                    }\r\n                }\r\n                if (this.globalCompositeOperation && this.globalCompositeOperation !== \"source-over\") {\r\n                    let op = this.globalCompositeOperation;\r\n                    let reverse = false;\r\n                    switch (op) {\r\n                        case \"destination-in\":\r\n                            reverse = true;\r\n                        case \"source-in\":\r\n                            op = \"in\";\r\n                            break;\r\n                        case \"destination-out\":\r\n                            reverse = true;\r\n                        case \"source-out\":\r\n                            op = \"out\";\r\n                            break;\r\n                        case \"destination-atop\":\r\n                            reverse = true;\r\n                        case \"source-atop\":\r\n                            op = \"atop\";\r\n                            break;\r\n                        case \"xor\":\r\n                            op = \"xor\";\r\n                            break;\r\n                        case \"destination-over\":\r\n                            reverse = true;\r\n                        default: // lighter|copy|arithmetic\r\n                            op = \"over\";\r\n                            break;\r\n                    }\r\n                    content +=\r\n                        `<feComposite in${reverse ? \"2\" : \"\"}=\"SourceGraphic\" ` +\r\n                        `in${reverse ? \"\" : \"2\"}=\"BackgroundImage\" operator=\"${op}\" result=\"comp\"/>\\n`;\r\n                    merge   += `<feMergeNode in=\"comp\" />\\n`;\r\n                } else {\r\n                    merge   += `<feMergeNode in=\"SourceGraphic\" />\\n`;\r\n                }\r\n\r\n                this.assets.push(\r\n                    `<filter id=\"filter-${++this.idCount}\" filterUnits=\"userSpaceOnUse\">\\n` +\r\n                    `${content}<feMerge>\\n${merge}</feMerge>\\n</filter>`);\r\n\r\n                this.filterIdUrl = `url(#filter-${this.idCount})`;\r\n                return `filter=\"${this.filterIdUrl}\" `;\r\n            } else {\r\n                this.filterIdUrl = \"\";\r\n            }\r\n        } else if (this.filterIdUrl !== \"\") {\r\n            return `filter=\"${this.filterIdUrl}\" `;\r\n        }\r\n        return \"\";\r\n    }\r\n\r\n    protected getMultilineTextHeight(c: SvgTextAttributes) {\r\n        // NOTE: Inherited classes can adjust the value of `lineHeight` (adjust argument and call super).\r\n        if ((c.multiline) &&\r\n            typeof this.font === 'string' &&\r\n            (c.lineHeight === void 0 || c.lineHeight === null)) {\r\n\r\n            const re = new RegExp(\r\n                '^\\\\s*(?:normal|italic|oblique)?\\s*' +\r\n                '(?:normal|small-caps)?\\\\s*' +\r\n                '(?:normal|bold|lighter|bolder|100|200|300|400|500|600|700|800|900)??\\\\s*' +\r\n                '(?:([0-9.]+)(px|pt|mm|cm|in|pc)?)(?:\\\\/(?:([0-9.]+|normal)(px|pt|mm|cm|in|em|%)?))?');\r\n\r\n            const x = re.exec(this.font);\r\n            if (x) {\r\n                // px\r\n                let fontSizePx = Number(x[1]);\r\n                switch (x[2]) {\r\n                    case 'pt':\r\n                        // 1pt === 1/72in === (1/72)*96px\r\n                        fontSizePx = (fontSizePx / 72.0) * 96.0;\r\n                        break;\r\n                    case 'pc':\r\n                        fontSizePx = (fontSizePx / 72.0) * 96.0 / 12.0;\r\n                        break;\r\n                    case 'mm':\r\n                        // 1mm === 1/25.4in === (1/25.4)*96px\r\n                        fontSizePx = (fontSizePx / 25.4) * 96.0;\r\n                        break;\r\n                    case 'cm':\r\n                        fontSizePx = (fontSizePx / 25.4) * 96.0 * 100.0;\r\n                        break;\r\n                    case 'in':\r\n                        // 1in === 96px\r\n                        fontSizePx = fontSizePx * 96.0;\r\n                        break;\r\n                }\r\n\r\n                let lineHeight = fontSizePx;\r\n                if (x[3]) {\r\n                    lineHeight = Number(x[3]) || 1.3;\r\n                    switch (x[4]) {\r\n                        case 'px':\r\n                            break;\r\n                        case 'pt':\r\n                            // 1pt === 1/72in === (1/72)*96px\r\n                            lineHeight = (lineHeight / 72.0) * 96.0;\r\n                            break;\r\n                        case 'pc':\r\n                            lineHeight = (lineHeight / 72.0) * 96.0 / 12.0;\r\n                            break;\r\n                        case 'mm':\r\n                            // 1mm === 1/25.4in === (1/25.4)*96px\r\n                            lineHeight = (lineHeight / 25.4) * 96.0;\r\n                            break;\r\n                        case 'cm':\r\n                            lineHeight = (lineHeight / 25.4) * 96.0 * 100.0;\r\n                            break;\r\n                        case 'in':\r\n                            // 1in === 96px\r\n                            lineHeight = lineHeight * 96.0;\r\n                            break;\r\n                        case '%':\r\n                            lineHeight = lineHeight / 100 * fontSizePx;\r\n                            break;\r\n                        default:\r\n                            lineHeight = lineHeight * fontSizePx;\r\n                            break;\r\n                    }\r\n                }\r\n                c.lineHeight = lineHeight;\r\n            }\r\n        }\r\n        return c;\r\n    }\r\n\r\n    /**\r\n     * @returns CSS font properties styles for Text tag.\r\n     */\r\n    protected getTextFontStyles() {\r\n        // NOTE: issue #1: CairoSVG, Inkscape, and some libraries can't understand `font` shorthand style property.\r\n        //                 (Inkscape (v0.92.4) may understand partly)\r\n        //       Inherited classes can split `font` property to `font-family`, `font-weight`, `font-size`, ...\r\n        return `font:${Escape.xml(this.font)};`;\r\n    }\r\n\r\n    protected getTextAttributes(maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): string {\r\n        // NOTE: Firefox and Inkscape will render text justified if `textLength` is set.\r\n        //       Chromium and Safari don't justify in this case.\r\n        //       This is due to the  difference of `SVG: <text textLength>` and `Canvas: fillText(,,,maxWidth)`.\r\n        //       Inherited classes can adjust the value of `textLength` (adjust argument and call super).\r\n        let textAlign: TextAlignValue;\r\n        switch (this.textAlign) {\r\n        case \"left\":\r\n            textAlign = \"start\";\r\n            break;\r\n        case \"right\":\r\n            textAlign = \"end\";\r\n            break;\r\n        case \"center\":\r\n            textAlign = \"middle\";\r\n            break;\r\n        default:\r\n            textAlign = this.textAlign;\r\n            break;\r\n        }\r\n\r\n        let textBaseline: TextBaselineValue;\r\n        switch (this.textBaseline) {\r\n        case \"top\":\r\n            textBaseline = \"text-before-edge\";\r\n            break;\r\n        case \"bottom\":\r\n            textBaseline = \"text-after-edge\";\r\n            break;\r\n        default:\r\n            textBaseline = this.textBaseline;\r\n            break;\r\n        }\r\n\r\n        let a = ` style=\"${this.getTextFontStyles()}\" text-anchor=\"${textAlign}\" dominant-baseline=\"${textBaseline}\"`;\r\n\r\n        if (maxWidthOrExtraAttrs === void 0 || maxWidthOrExtraAttrs === null) {\r\n            return a;\r\n        } else if (typeof maxWidthOrExtraAttrs === \"number\") {\r\n            a += ` textLength=\"${maxWidthOrExtraAttrs}\"`;\r\n            return a;\r\n        }\r\n\r\n        const c = this.getMultilineTextHeight(maxWidthOrExtraAttrs);\r\n\r\n        if (c.textLength                 !== void 0 && c.textLength                 !== null) a += ` textLength=\"${c.textLength}\"`;\r\n        if (c.lengthAdjust               !== void 0 && c.lengthAdjust               !== null) a += ` lengthAdjust=\"${c.lengthAdjust}\"`;\r\n        if (c.rotate                     !== void 0 && c.rotate                     !== null) a += ` rotate=\"${c.rotate}\"`;\r\n        if (c.writingMode                !== void 0 && c.writingMode                !== null) a += ` writing-mode=\"${c.writingMode}\"`;\r\n        if (c.glyphOrientationVertical   !== void 0 && c.glyphOrientationVertical   !== null) a += ` glyph-orientation-vertical=\"${c.glyphOrientationVertical}\"`;\r\n        if (c.glyphOrientationHorizontal !== void 0 && c.glyphOrientationHorizontal !== null) a += ` glyph-orientation-horizontal=\"${c.glyphOrientationHorizontal}\"`;\r\n        if (c.direction                  !== void 0 && c.direction                  !== null) a += ` direction=\"${c.direction}\"`;\r\n        if (c.unicodeBidi                !== void 0 && c.unicodeBidi                !== null) a += ` unicode-bidi=\"${c.unicodeBidi}\"`;\r\n        if (c.textDecoration             !== void 0 && c.textDecoration             !== null) a += ` text-decoration=\"${c.textDecoration}\"`;\r\n        if (c.kerning                    !== void 0 && c.kerning                    !== null) a += ` kerning=\"${c.kerning}\"`;\r\n        if (c.letterSpacing              !== void 0 && c.letterSpacing              !== null) a += ` letter-spacing=\"${c.letterSpacing}\"`;\r\n        if (c.wordSpacing                !== void 0 && c.wordSpacing                !== null) a += ` word-spacing=\"${c.wordSpacing}\"`;\r\n\r\n        return a;\r\n    }\r\n    private getTextPath(maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): {id: string, offset?: number} | null {\r\n        if (maxWidthOrExtraAttrs !== void 0 && maxWidthOrExtraAttrs !== null && typeof maxWidthOrExtraAttrs === \"object\") {\r\n            if (maxWidthOrExtraAttrs.textPath) {\r\n                const inv = this.ctm.getInverse();\r\n                const subpath: Array<string | number | Point2D> = [];\r\n                for (const v of this.subpath) {\r\n                    if (v instanceof Point2D) {\r\n                        subpath.push(inv.transfer(v));\r\n                    } else {\r\n                        subpath.push(v);\r\n                    }\r\n                }\r\n\r\n                const id = `path-${++this.idCount}`;\r\n                this.assets.push(`<path id=\"${id}\" d=\"${WordWrap.loose(subpath.join(\" \"))}\" />\\n`);\r\n                this.subpath = [];\r\n                this.currentPoint = null;\r\n                this.currentPointOnCtm = null;\r\n\r\n                const r: {id: string, offset?: number} = {id: `#${id}`};\r\n\r\n                if (maxWidthOrExtraAttrs.textPathOffset !== void 0 && maxWidthOrExtraAttrs.textPathOffset !== null) {\r\n                    r.offset = maxWidthOrExtraAttrs.textPathOffset;\r\n                }\r\n                return r;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    private convertToMultiline(text: string, x: number, y: number, maxWidthOrExtraAttrs: number | SvgTextAttributes | null | undefined): string {\r\n        if (maxWidthOrExtraAttrs !== void 0 && maxWidthOrExtraAttrs !== null && typeof maxWidthOrExtraAttrs === \"object\") {\r\n            if (maxWidthOrExtraAttrs.multiline && !maxWidthOrExtraAttrs.textPath) {\r\n                const h = maxWidthOrExtraAttrs.lineHeight || 12;\r\n                const s = text.replace(/\\r\\n/g, \"\\n\").replace(/\\r/g, \"\\n\");\r\n                const a = Escape.xml(s).split(\"\\n\");\r\n                switch (maxWidthOrExtraAttrs.writingMode) {\r\n                    case \"tb\": case \"tb-rl\":\r\n                        return `<tspan>${a.join(`</tspan><tspan dx=\"${-h}\" y=\"${y}\">`)}</tspan>`;\r\n                    default:\r\n                        return `<tspan>${a.join(`</tspan><tspan x=\"${x}\" dy=\"${h}\">`)}</tspan>`;\r\n                }\r\n            }\r\n        }\r\n        return `<tspan x=\"${x}\" y=\"${y}\">${Escape.xml(text)}</tspan>`;\r\n    }\r\n\r\n    public stroke(): void {\r\n        this.content +=\r\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\r\n    }\r\n    public strokeRect(x: number, y: number, w: number, h: number): void {\r\n        this.content +=\r\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\r\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            \"/></g>\\n\";\r\n    }\r\n    public strokeText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\r\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\r\n        this.content +=\r\n            `<g ${this.getStrokeAttrs()}fill=\"none\"${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<text` +\r\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\r\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\r\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\r\n    }\r\n\r\n    /**\r\n     * fillRule: nonzero|evenodd\r\n     */\r\n    public fill(fillRule: string = \"nonzero\"): void {\r\n        this.content +=\r\n            `<g stroke=\"none\" ${this.getFillAttrs(fillRule)}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\r\n    }\r\n    public fillRect(x: number, y: number, w: number, h: number): void {\r\n        this.content +=\r\n            `<g stroke=\"none\" ${this.getFillAttrs(\"nonzero\")}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\r\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            \"/></g>\\n\";\r\n    }\r\n    public fillText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\r\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\r\n        this.content +=\r\n            `<g stroke=\"none\" ${this.getFillAttrs(\"nonzero\")}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<text` +\r\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\r\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\r\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\r\n    }\r\n\r\n    /**\r\n     * fillRule: nonzero|evenodd\r\n     */\r\n    public fillStroke(fillRule: string = \"nonzero\"): void {\r\n        this.content +=\r\n            `<g ${this.getFillAttrs(fillRule)}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" />\\n</g>\\n`;\r\n    }\r\n    public fillStrokeRect(x: number, y: number, w: number, h: number): void {\r\n        this.content +=\r\n            `<g ${this.getFillAttrs(\"nonzero\")}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<rect x=\"${x}\" y=\"${y}\" width=\"${w}\" height=\"${h}\" ` +\r\n            `transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            \"/></g>\\n\";\r\n    }\r\n    public fillStrokeText(text: string, x: number, y: number, maxWidthOrExtraAttrs?: number | SvgTextAttributes): void {\r\n        const path = this.getTextPath(maxWidthOrExtraAttrs);\r\n        this.content +=\r\n            `<g ${this.getFillAttrs(\"nonzero\")}${this.getStrokeAttrs()}${this.getFilterAttrs()}` +\r\n            (this.clipPath.length > 0 ? ` clip-path=\"${this.clipPath}\" ` : \"\") +\r\n            `>\\n<text` +\r\n            `${this.getTextAttributes(maxWidthOrExtraAttrs)} transform=\"matrix(${this.ctm.toString()})\" ` +\r\n            `\\n>${path !== null ? `<textPath xlink:href=\"${path.id}\"${path.offset !== void 0 ? ` startOffset=\"${path.offset}\"` : \"\"}\\n>` : \"\"}` +\r\n            this.convertToMultiline(text, x, y, maxWidthOrExtraAttrs) +\r\n            `${path !== null ? \"</textPath>\" : \"\"}</text></g>\\n`;\r\n    }\r\n\r\n    public getLineDash(): number[] {\r\n        return this.lineDash;\r\n    }\r\n    public setLineDash(segments: number[]): void {\r\n        this.lineDash = segments;\r\n    }\r\n\r\n    /**\r\n     * fillRule: nonzero|evenodd\r\n     */\r\n    public clip(fillRule: string = \"nonzero\"): void {\r\n        const a =\r\n            `<clipPath id=\"clip-${++this.idCount}\" fill-rule=\"${fillRule}\" >` +\r\n            `<path d=\"${WordWrap.loose(this.subpath.join(\" \"))}\" /></clipPath>`;\r\n        this.assets.push(a);\r\n        this.clipPath = `url(#clip-${this.idCount})`;\r\n    }\r\n\r\n    public registerImage(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData, id?: string): string {\r\n        const img = imageData = this.convertImageToSvgImageData(imageData);\r\n        const imgId = (id === null || id === void 0) ? `img-${++this.idCount}_w${img.width}_h${img.height}` : id;\r\n        const a =\r\n            `<image id=\"${imgId}\" \\n` +\r\n            `x=\"${0}\" y=\"${0}\" width=\"${1}\" height=\"${1}\" ` +\r\n            `preserveAspectRatio=\"none\" ` +\r\n            `xlink:href=\"${img.url}\" />`;\r\n        this.assets.push(a);\r\n        return `#${imgId}`;\r\n    }\r\n\r\n    public registerCustomFilter(id: string, markup: string): void {\r\n        this.assets.push(markup);\r\n        this.filterIdUrl = `url(#${id})`;\r\n    }\r\n\r\n    public registerCustomAsset(markup: string | SvgCanvas2DAsset): void {\r\n        this.assets.push(markup);\r\n    }\r\n    public appendCustomContent(markup: string): void {\r\n        this.content += `<g transform=\"matrix(${this.ctm.toString()})\">${markup}</g>\\n`;\r\n    }\r\n\r\n    public createLinearGradient(x0: number, y0: number, x1: number, y1: number): SvgCanvas2DLinerGradient {\r\n        const a = new SvgCanvas2DLinerGradient(`lgrad-${++this.idCount}`, x0, y0, x1, y1);\r\n        this.assets.push(a);\r\n        return a;\r\n    }\r\n    /** fr is ignored. fr is always 0. */\r\n    public createRadialGradient(cx: number, cy: number, r: number, fx: number, fy: number, fr?: number): SvgCanvas2DRadialGradient {\r\n        const a = new SvgCanvas2DRadialGradient(`rgrad-${++this.idCount}`, cx, cy, r, fx, fy);\r\n        this.assets.push(a);\r\n        return a;\r\n    }\r\n\r\n    public createPattern(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData, repetition?: string): SvgCanvas2DPattern {\r\n        const a = new SvgCanvas2DPattern(`pat-${++this.idCount}`, this.convertImageToSvgImageData(imageData));\r\n        this.assets.push(a);\r\n        return a;\r\n    }\r\n    public beginPattern(): void {\r\n        this.contentSaved = this.content;\r\n        this.content = \"\";\r\n        const s = new SvgCanvasGraphicState();\r\n        this.graphicsStack.push(s);\r\n    }\r\n    public endPattern(x: number, y: number, width: number, height: number): string {\r\n        const id = ++this.idCount;\r\n        const a =\r\n            `<pattern id=\"pat-${id}\" patternUnits=\"userSpaceOnUse\" patternContentUnits=\"userSpaceOnUse\" ` +\r\n            `x=\"${x}\" y=\"${y}\" width=\"${width}\" height=\"${height}\">\\n${this.content}</pattern>`;\r\n        this.assets.push(a);\r\n        this.content = this.contentSaved;\r\n        this.contentSaved = \"\";\r\n        this.restore();\r\n        return `url(#pat-${id})`;\r\n    }\r\n\r\n    private convertImageToSvgImageData(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData): SvgCanvasImageData {\r\n        let img: SvgCanvasImageData;\r\n        if (typeof HTMLImageElement !== \"undefined\" && imageData instanceof HTMLImageElement) {\r\n            const c = document.createElement(\"canvas\");\r\n            c.width = imageData.width;\r\n            c.height = imageData.height;\r\n            const ctx = c.getContext(\"2d\");\r\n            if (ctx === null) {\r\n                throw new Error(\"SvgCanvas#convertImageToSvgImageData: Can't get context from Canvas.\");\r\n            }\r\n            ctx.drawImage(imageData, 0, 0);\r\n            img = new SvgCanvasImageData(c.toDataURL(), 0, 0, c.width, c.height);\r\n        } else if (typeof HTMLCanvasElement !== \"undefined\" && imageData instanceof HTMLCanvasElement) {\r\n            img = new SvgCanvasImageData(imageData.toDataURL(), 0, 0, imageData.width, imageData.height);\r\n        } else {\r\n            img = imageData as SvgCanvasImageData;\r\n        }\r\n        return img;\r\n    }\r\n\r\n    public drawImage(imageData: HTMLImageElement | HTMLCanvasElement | SvgCanvasImageData | string,\r\n                     canvasOffsetX: number, canvasOffsetY: number,\r\n                     canvasImageWidth: number, canvasImageHeight: number): void {\r\n        let img: SvgCanvasImageData;\r\n        if (typeof imageData === \"string\")\r\n            img = new SvgCanvasImageData(imageData, 0, 0, canvasImageWidth, canvasImageHeight);\r\n        else\r\n            img = this.convertImageToSvgImageData(imageData);\r\n\r\n        if (img.url.startsWith(\"#\")) {\r\n            const tm = this.ctm.translate(canvasOffsetX, canvasOffsetY).scale(canvasImageWidth, canvasImageHeight);\r\n            this.content +=\r\n                `<g><use x=\"0\" y=\"0\" ` +\r\n                `transform=\"matrix(${tm.toString()})\" ` +\r\n                `\\nxlink:href=\"${img.url}\" /></g>\\n`;\r\n        } else {\r\n            this.content +=\r\n                `<g><image x=\"${canvasOffsetX}\" y=\"${canvasOffsetY}\" ` +\r\n                `width=\"${canvasImageWidth}\" height=\"${canvasImageHeight}\" ` +\r\n                `preserveAspectRatio=\"none\" ` +\r\n                `transform=\"matrix(${this.ctm.toString()})\" ` +\r\n                `\\nxlink:href=\"${img.url}\" /></g>\\n`;\r\n        }\r\n    }\r\n\r\n    public beginGroup(): void {\r\n        this.content += \"<g>\";\r\n    }\r\n    public endGroup(): void {\r\n        this.content += \"</g>\";\r\n    }\r\n\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    private _fontHeightRatio = 1.25;\r\n    public get fontHeightRatio(): number {\r\n        return this._fontHeightRatio;\r\n    }\r\n    public set fontHeightRatio(value: number) {\r\n        this._fontHeightRatio = value;\r\n    }\r\n    public measureText(text: string): { width: number; } {\r\n        const re = this.font.match(/(\\d+(?:.\\d+)?)(px|pt|in|mm|em|rem|%)/);\r\n        let scale = 1;\r\n        let size = 12;\r\n        if (re) {\r\n            // 96px === 1in (not 72px === 1in)\r\n            // 72pt === 1in\r\n            //  1mm === 1/25.4in\r\n            switch (re[2]) {\r\n            case \"pt\": // pt -> px\r\n                scale = 96 / 72;\r\n                break;\r\n            case \"in\": // in -> px\r\n                scale = 96;\r\n                break;\r\n            case \"mm\": // mm -> px\r\n                scale = 96 * (1 / 25.4);\r\n                break;\r\n            case \"em\": case \"rem\":\r\n                scale = 12;\r\n                break;\r\n            case \"%\":\r\n                scale = 1 / 100;\r\n                break;\r\n            }\r\n            size = Number.parseFloat(re[1]);\r\n        }\r\n        return { width: Math.round(scale * size * Array.from(text\r\n            .replace(/[\\u200B-\\u200D\\uFEFF\\u200E\\u200F]/g, '')\r\n            .normalize('NFKC')).length / this.fontHeightRatio)\r\n        };\r\n    }\r\n\r\n    public clearRect(x: number, y: number, w: number, h: number): void {\r\n        this.save();\r\n        this.fillStyle = 'white';\r\n        this.fillRect(x, y, w, h);\r\n        this.restore();\r\n    }\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\nimport { NumberPrecision } from \"red-agate-util/modules/convert/NumberPrecision\";\r\n\r\n\r\nconst dp = NumberPrecision.decimalPlaces(6);\r\n\r\n\r\nexport class Point2D {\r\n    constructor(public x: number, public y: number) {\r\n    }\r\n    public toString(): string {\r\n        return `${this.x},${this.y}`;\r\n    }\r\n}\r\n\r\n\r\nexport class Vector2D {\r\n    constructor(public x: number, public y: number) {\r\n    }\r\n    public static fromPoints(p1: Point2D, p2: Point2D): Vector2D {\r\n        return new Vector2D(p2.x - p1.x, p2.y - p1.y);\r\n    }\r\n    public isZero(): boolean {\r\n        return this.x === 0 && this.y === 0;\r\n    }\r\n    public getLength(): number {\r\n        return Math.sqrt(this.x ** 2 + this.y ** 2);\r\n    }\r\n    /** returns 0..2*PI */\r\n    public getAngle(): number {\r\n        let angle = Math.acos(this.x / Math.sqrt(this.x ** 2 + this.y ** 2)); // returns 0..PI\r\n        if (0 > this.y) {\r\n            // 180deg < angle < 360deg\r\n            angle = Math.PI * 2 - angle;\r\n        }\r\n        return angle;\r\n    }\r\n    /** returns 0..PI */\r\n    public static getAngle(v1: Vector2D, v2: Vector2D): number {\r\n        const vlen1 = Math.sqrt(v1.x ** 2 + v1.y ** 2);\r\n        const vlen2 = Math.sqrt(v2.x ** 2 + v2.y ** 2);\r\n        return Math.acos((v1.x * v2.x + v1.y * v2.y) / (vlen1 * vlen2));\r\n    }\r\n    public toString(): string {\r\n        return `${this.x},${this.y}`;\r\n    }\r\n}\r\n\r\n\r\nexport class Rect2D {\r\n    constructor(public x: number, public y: number, public w: number, public h: number) {\r\n    }\r\n}\r\n\r\n\r\nexport class TransferMatrix2D {\r\n    // [m11 m21 dx]\r\n    // [m12 m22 dy]\r\n    // [  0   0  1]\r\n    public m11: number = 1;\r\n    public m21: number = 0;\r\n    public dx: number = 0;\r\n    public m12: number = 0;\r\n    public m22: number = 1;\r\n    public dy: number = 0;\r\n\r\n    constructor(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number);\r\n    constructor(src?: TransferMatrix2D);\r\n    // tslint:disable-next-line:variable-name\r\n    constructor(m11_or_src: any, m12?: number, m21?: number, m22?: number, dx?: number, dy?: number) {\r\n        if (! m11_or_src) return;\r\n        if (typeof m11_or_src === \"object\") {\r\n            this.m11 = m11_or_src.m11 || this.m11;\r\n            this.m12 = m11_or_src.m12 || this.m12;\r\n            this.m21 = m11_or_src.m21 || this.m21;\r\n            this.m22 = m11_or_src.m22 || this.m22;\r\n            this.dx  = m11_or_src.dx  || this.dx;\r\n            this.dy  = m11_or_src.dy  || this.dy;\r\n        } else {\r\n            this.m11 = m11_or_src || this.m11;\r\n            this.m12 = m12 || this.m12;\r\n            this.m21 = m21 || this.m21;\r\n            this.m22 = m22 || this.m22;\r\n            this.dx  = dx  || this.dx;\r\n            this.dy  = dy  || this.dy;\r\n        }\r\n    }\r\n    public toString(): string {\r\n        return `${this.m11} ${this.m12} ${this.m21} ${this.m22} ${this.dx} ${this.dy}`;\r\n    }\r\n    public isIdentity(): boolean {\r\n        return this.m11 === 1 && this.m21 === 0 && this.dx === 0 &&\r\n            this.m12 === 0 && this.m22 === 1 && this.dy === 0;\r\n    }\r\n\r\n    public scale(x: number, y: number): TransferMatrix2D {\r\n        return this.concat(new TransferMatrix2D(x, 0, 0, y, 0, 0));\r\n    }\r\n    public translate(x: number, y: number): TransferMatrix2D {\r\n        return this.concat(new TransferMatrix2D(1, 0, 0, 1, x, y));\r\n    }\r\n    public rotate(angle: number): TransferMatrix2D {\r\n        return this.concat(new TransferMatrix2D(\r\n            Math.cos(angle), Math.sin(angle), -Math.sin(angle), Math.cos(angle), 0, 0));\r\n    }\r\n    public skewX(angle: number): TransferMatrix2D {\r\n        return this.concat(new TransferMatrix2D(1, 0, Math.tan(angle), 1, 0, 0));\r\n    }\r\n    public skewY(angle: number): TransferMatrix2D {\r\n        return this.concat(new TransferMatrix2D(1, Math.tan(angle), 0, 1, 0, 0));\r\n    }\r\n    public concat(mat: TransferMatrix2D): TransferMatrix2D {\r\n        // [m11' m21' dx']   [m11*n11 + m21*n12, m11*n21 + m21*n22, m11*tx + m21*ty + dx]   [m11 m21 dx]   [n11 n21 tx]\r\n        // [m12' m22' dy'] = [m12*n11 + m22*n12, m12*n21 + m22*n22, m12*tx + m22*ty + dy] = [m12 m22 dy] * [n12 n22 ty]\r\n        // [  0    0   1 ]   [                0,                 0,                    1]   [  0   0  1]   [  0   0  1]\r\n        return new TransferMatrix2D(\r\n            this.m11 * mat.m11 + this.m21 * mat.m12,             // m11\r\n            this.m12 * mat.m11 + this.m22 * mat.m12,             // m12\r\n            this.m11 * mat.m21 + this.m21 * mat.m22,             // m21\r\n            this.m12 * mat.m21 + this.m22 * mat.m22,             // m22\r\n            this.m11 * mat.dx  + this.m21 * mat.dy + this.dx,    // dx\r\n            this.m12 * mat.dx  + this.m22 * mat.dy + this.dy     // dy\r\n        );\r\n    }\r\n\r\n    public transfer(p: Point2D): Point2D;\r\n    public transfer(x: number, y: number): number[];\r\n    // tslint:disable-next-line:variable-name\r\n    public transfer(x_or_p: any, y?: number): any {\r\n        // [x']   [m11 m21 dx]   [x]\r\n        // [y'] = [m12 m22 dy] * [y]\r\n        // [1 ]   [  0   0  1]   [1]\r\n        if (typeof x_or_p === \"object\")\r\n            return new Point2D(\r\n                dp(this.m11 * x_or_p.x + this.m21 * x_or_p.y + this.dx),\r\n                dp(this.m12 * x_or_p.x + this.m22 * x_or_p.y + this.dy)\r\n                );\r\n        else\r\n            return [\r\n                dp(this.m11 * x_or_p + this.m21 * (y as number) + this.dx),\r\n                dp(this.m12 * x_or_p + this.m22 * (y as number) + this.dy)\r\n                ];\r\n    }\r\n\r\n    //        [m11, m21, dx]\r\n    // A    = [m12, m22, dy]\r\n    //        [  0,   0,  1]\r\n    //\r\n    //        [ m22,  -m21,  m21* dy- dx*m22]\r\n    // A^-1 = [-m12,   m11,   dx*m12-m11* dy]\r\n    //        [   0,     0,  m11*m22-m21*m12]\r\n    public getInverse(): TransferMatrix2D {\r\n        return new TransferMatrix2D(\r\n             this.m22,\r\n            -this.m12,\r\n            -this.m21,\r\n             this.m11,\r\n            this.m21 * this.dy  - this.dx  * this.m22,\r\n            this.dx  * this.m12 - this.m11 * this.dy\r\n        );\r\n    }\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\nexport interface VectorCanvas2DGradient {\r\n    addColorStop(offset: number, color: string): void;\r\n}\r\n\r\n\r\nexport interface VectorCanvas2DPattern {\r\n}\r\n\r\n\r\n/**\r\n * subset of CanvasRenderingContext2D\r\n */\r\nexport interface VectorCanvas2D {\r\n    globalAlpha: number;\r\n    globalCompositeOperation: string;\r\n    shadowBlur: number;\r\n    shadowColor: string;\r\n    shadowOffsetX: number;\r\n    shadowOffsetY: number;\r\n\r\n    font: string;\r\n    textAlign: string;\r\n    textBaseline: string;\r\n\r\n    lineCap: string;\r\n    lineDashOffset: number;\r\n    lineJoin: string;\r\n    lineWidth: number;\r\n    miterLimit: number;\r\n\r\n    strokeStyle: string | VectorCanvas2DGradient | VectorCanvas2DPattern;\r\n    fillStyle: string | VectorCanvas2DGradient | VectorCanvas2DPattern;\r\n\r\n    save(): void;\r\n    restore(): void;\r\n\r\n    scale(x: number, y: number): void;\r\n    translate(x: number, y: number): void;\r\n    rotate(angle: number): void;\r\n    transform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void;\r\n    setTransform(m11: number, m12: number, m21: number, m22: number, dx: number, dy: number): void;\r\n\r\n    beginPath(): void;\r\n    closePath(): void;\r\n\r\n    moveTo(x: number, y: number): void;\r\n    lineTo(x: number, y: number): void;\r\n    quadraticCurveTo(cpx: number, cpy: number, x: number, y: number): void;\r\n    bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number): void;\r\n\r\n    arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise?: boolean): void;\r\n    arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): void;\r\n    rect(x: number, y: number, w: number, h: number): void;\r\n\r\n    stroke(): void;\r\n    strokeRect(x: number, y: number, w: number, h: number): void;\r\n    strokeText(text: string, x: number, y: number, maxWidth?: number): void;\r\n\r\n    fill(fillRule?: string): void;\r\n    fillRect(x: number, y: number, w: number, h: number): void;\r\n    fillText(text: string, x: number, y: number, maxWidth?: number): void;\r\n\r\n    getLineDash(): number[];\r\n    setLineDash(segments: number[]): void;\r\n\r\n    clip(fillRule?: string): void;\r\n\r\n    createLinearGradient(x0: number, y0: number, x1: number, y1: number): VectorCanvas2DGradient;\r\n    createRadialGradient(x0: number, y0: number, r0: number, x1: number, y1: number, r1: number): VectorCanvas2DGradient;\r\n    createPattern(imageData: HTMLImageElement | HTMLCanvasElement, repetition?: string): VectorCanvas2DPattern;\r\n\r\n    drawImage(imageData: HTMLImageElement | HTMLCanvasElement,\r\n              offsetX: number, offsetY: number, width?: number, height?: number,\r\n              canvasOffsetX?: number, canvasOffsetY?: number, canvasImageWidth?: number, canvasImageHeight?: number): void;\r\n\r\n    measureText(text: string): { width: number; };\r\n    clearRect(x: number, y: number, w: number, h: number): void;\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\nexport class WebColor {\r\n    private static colorNames = new Map<string, {r: number, g: number, b: number}>([\r\n        [\"red\"                 , {r: 255, g:   0, b:   0}],\r\n        [\"darkred\"             , {r: 139, g:   0, b:   0}],\r\n        [\"maroon\"              , {r: 128, g:   0, b:   0}],\r\n        [\"brown\"               , {r: 165, g:  42, b:  42}],\r\n        [\"firebrick\"           , {r: 178, g:  34, b:  34}],\r\n        [\"sienna\"              , {r: 160, g:  82, b:  45}],\r\n        [\"saddlebrown\"         , {r: 139, g:  69, b:  19}],\r\n        [\"peru\"                , {r: 205, g: 133, b:  63}],\r\n        [\"indianred\"           , {r: 205, g:  92, b:  92}],\r\n        [\"rosybrown\"           , {r: 188, g: 143, b: 143}],\r\n        [\"lightcoral\"          , {r: 240, g: 128, b: 128}],\r\n        [\"salmon\"              , {r: 250, g: 128, b: 114}],\r\n        [\"darksalmon\"          , {r: 233, g: 150, b: 122}],\r\n        [\"coral\"               , {r: 255, g: 127, b:  80}],\r\n        [\"tomato\"              , {r: 255, g:  99, b:  71}],\r\n        [\"sandybrown\"          , {r: 244, g: 164, b:  96}],\r\n        [\"lightsalmon\"         , {r: 255, g: 160, b: 122}],\r\n        [\"chocolate\"           , {r: 210, g: 105, b:  30}],\r\n        [\"orangered\"           , {r: 255, g:  69, b:   0}],\r\n        [\"orange\"              , {r: 255, g: 165, b:   0}],\r\n        [\"darkorange\"          , {r: 255, g: 140, b:   0}],\r\n        [\"tan\"                 , {r: 210, g: 180, b: 140}],\r\n        [\"peachpuff\"           , {r: 255, g: 218, b: 185}],\r\n        [\"bisque\"              , {r: 255, g: 228, b: 196}],\r\n        [\"moccasin\"            , {r: 255, g: 228, b: 181}],\r\n        [\"navajowhite\"         , {r: 255, g: 222, b: 173}],\r\n        [\"wheat\"               , {r: 245, g: 222, b: 179}],\r\n        [\"burlywood\"           , {r: 222, g: 184, b: 135}],\r\n        [\"darkgoldenrod\"       , {r: 184, g: 134, b:  11}],\r\n        [\"goldenrod\"           , {r: 218, g: 165, b:  32}],\r\n        [\"gold\"                , {r: 255, g: 215, b:   0}],\r\n        [\"yellow\"              , {r: 255, g: 255, b:   0}],\r\n        [\"lightgoldenrodyellow\", {r: 250, g: 250, b: 210}],\r\n        [\"palegoldenrod\"       , {r: 238, g: 232, b: 170}],\r\n        [\"khaki\"               , {r: 240, g: 230, b: 140}],\r\n        [\"darkkhaki\"           , {r: 189, g: 183, b: 107}],\r\n        [\"blanchedalmond\"      , {r: 255, g: 235, b: 205}],\r\n        [\"lightyellow\"         , {r: 255, g: 255, b: 224}],\r\n        [\"cornsilk\"            , {r: 255, g: 248, b: 220}],\r\n        [\"antiquewhite\"        , {r: 250, g: 235, b: 215}],\r\n        [\"papayawhip\"          , {r: 255, g: 239, b: 213}],\r\n        [\"papayawhite\"         , {r: 255, g: 239, b: 213}],\r\n        [\"lemonchiffon\"        , {r: 255, g: 250, b: 205}],\r\n        [\"beige\"               , {r: 245, g: 245, b: 220}],\r\n        [\"oldlace\"             , {r: 253, g: 245, b: 230}],\r\n        [\"lightcyan\"           , {r: 224, g: 255, b: 255}],\r\n        [\"aliceblue\"           , {r: 240, g: 248, b: 255}],\r\n        [\"whitesmoke\"          , {r: 245, g: 245, b: 245}],\r\n        [\"lavenderblush\"       , {r: 255, g: 240, b: 245}],\r\n        [\"floralwhite\"         , {r: 255, g: 250, b: 240}],\r\n        [\"mintcream\"           , {r: 245, g: 255, b: 250}],\r\n        [\"ghostwhite\"          , {r: 248, g: 248, b: 255}],\r\n        [\"honeydew\"            , {r: 240, g: 255, b: 240}],\r\n        [\"seashell\"            , {r: 255, g: 245, b: 238}],\r\n        [\"ivory\"               , {r: 255, g: 255, b: 240}],\r\n        [\"azure\"               , {r: 240, g: 255, b: 255}],\r\n        [\"snow\"                , {r: 255, g: 250, b: 250}],\r\n        [\"white\"               , {r: 255, g: 255, b: 255}],\r\n        [\"gainsboro\"           , {r: 220, g: 220, b: 220}],\r\n        [\"lightgrey\"           , {r: 211, g: 211, b: 211}],\r\n        [\"silver\"              , {r: 192, g: 192, b: 192}],\r\n        [\"darkgray\"            , {r: 169, g: 169, b: 169}],\r\n        [\"lightslategray\"      , {r: 119, g: 136, b: 153}],\r\n        [\"slategray\"           , {r: 112, g: 128, b: 144}],\r\n        [\"gray\"                , {r: 128, g: 128, b: 128}],\r\n        [\"dimgray\"             , {r: 105, g: 105, b: 105}],\r\n        [\"darkslategray\"       , {r:  47, g:  79, b:  79}],\r\n        [\"black\"               , {r:   0, g:   0, b:   0}],\r\n        [\"lawngreen\"           , {r: 124, g: 252, b:   0}],\r\n        [\"greenyellow\"         , {r: 173, g: 255, b:  47}],\r\n        [\"chartreuse\"          , {r: 127, g: 255, b:   0}],\r\n        [\"lime\"                , {r:   0, g: 255, b:   0}],\r\n        [\"limegreen\"           , {r:  50, g: 205, b:  50}],\r\n        [\"yellowgreen\"         , {r: 154, g: 205, b:  50}],\r\n        [\"olive\"               , {r: 128, g: 128, b:   0}],\r\n        [\"olivedrab\"           , {r: 107, g: 142, b:  35}],\r\n        [\"darkolivegreen\"      , {r:  85, g: 107, b:  47}],\r\n        [\"forestgreen\"         , {r:  34, g: 139, b:  34}],\r\n        [\"darkgreen\"           , {r:   0, g: 100, b:   0}],\r\n        [\"green\"               , {r:   0, g: 128, b:   0}],\r\n        [\"seagreen\"            , {r:  46, g: 139, b:  87}],\r\n        [\"mediumseagreen\"      , {r:  60, g: 179, b: 113}],\r\n        [\"darkseagreen\"        , {r: 143, g: 188, b: 143}],\r\n        [\"lightgreen\"          , {r: 144, g: 238, b: 144}],\r\n        [\"palegreen\"           , {r: 152, g: 251, b: 152}],\r\n        [\"springgreen\"         , {r:   0, g: 255, b: 127}],\r\n        [\"mediumspringgreen\"   , {r:   0, g: 250, b: 154}],\r\n        [\"teal\"                , {r:   0, g: 128, b: 128}],\r\n        [\"darkcyan\"            , {r:   0, g: 139, b: 139}],\r\n        [\"lightseagreen\"       , {r:  51, g: 153, b: 153}],\r\n        [\"mediumaquamarine\"    , {r: 102, g: 205, b: 170}],\r\n        [\"cadetblue\"           , {r:  95, g: 158, b: 160}],\r\n        [\"steelblue\"           , {r:  70, g: 130, b: 180}],\r\n        [\"aquamarine\"          , {r: 127, g: 255, b: 212}],\r\n        [\"powderblue\"          , {r: 176, g: 224, b: 230}],\r\n        [\"paleturquoise\"       , {r: 175, g: 238, b: 238}],\r\n        [\"lightblue\"           , {r: 173, g: 216, b: 230}],\r\n        [\"lightsteelblue\"      , {r: 176, g: 196, b: 222}],\r\n        [\"skyblue\"             , {r: 135, g: 206, b: 235}],\r\n        [\"lightskyblue\"        , {r: 135, g: 206, b: 250}],\r\n        [\"mediumturquoise\"     , {r:  72, g: 209, b: 204}],\r\n        [\"turquoise\"           , {r:  64, g: 224, b: 208}],\r\n        [\"darkturquoise\"       , {r:   0, g: 206, b: 209}],\r\n        [\"aqua\"                , {r:   0, g: 255, b: 255}],\r\n        [\"cyan\"                , {r:   0, g: 255, b: 255}],\r\n        [\"deepskyblue\"         , {r:   0, g: 191, b: 255}],\r\n        [\"dodgerblue\"          , {r:  30, g: 144, b: 255}],\r\n        [\"cornflowerblue\"      , {r: 100, g: 149, b: 237}],\r\n        [\"royalblue\"           , {r:  65, g: 105, b: 225}],\r\n        [\"blue\"                , {r:   0, g:   0, b: 255}],\r\n        [\"mediumblue\"          , {r:   0, g:   0, b: 205}],\r\n        [\"navy\"                , {r:   0, g:   0, b: 128}],\r\n        [\"darkblue\"            , {r:   0, g:   0, b: 139}],\r\n        [\"midnightblue\"        , {r:  25, g:  25, b: 112}],\r\n        [\"darkslateblue\"       , {r:  72, g:  61, b: 139}],\r\n        [\"mediumslateblue\"     , {r: 123, g: 104, b: 238}],\r\n        [\"slateblue\"           , {r: 106, g:  90, b: 205}],\r\n        [\"darkorchid\"          , {r: 153, g:  50, b: 204}],\r\n        [\"darkviolet\"          , {r: 148, g:   0, b: 211}],\r\n        [\"blueviolet\"          , {r: 138, g:  43, b: 226}],\r\n        [\"mediumorchid\"        , {r: 186, g:  85, b: 211}],\r\n        [\"plum\"                , {r: 221, g: 160, b: 221}],\r\n        [\"lavender\"            , {r: 230, g: 230, b: 250}],\r\n        [\"thistle\"             , {r: 216, g: 191, b: 216}],\r\n        [\"orchid\"              , {r: 218, g: 112, b: 214}],\r\n        [\"magenta\"             , {r: 255, g:   0, b: 255}],\r\n        [\"fuchsia\"             , {r: 255, g:   0, b: 255}],\r\n        [\"violet\"              , {r: 238, g: 130, b: 238}],\r\n        [\"indigo\"              , {r:  75, g:   0, b: 130}],\r\n        [\"darkmagenta\"         , {r: 139, g:   0, b: 139}],\r\n        [\"purple\"              , {r: 128, g:   0, b: 128}],\r\n        [\"mediumpurple\"        , {r: 147, g: 112, b: 219}],\r\n        [\"mediumvioletred\"     , {r: 199, g:  21, b: 133}],\r\n        [\"deeppink\"            , {r: 255, g:  20, b: 147}],\r\n        [\"hotpink\"             , {r: 255, g: 105, b: 180}],\r\n        [\"crimson\"             , {r: 220, g:  20, b:  60}],\r\n        [\"palevioletred\"       , {r: 219, g: 112, b: 147}],\r\n        [\"lightpink\"           , {r: 255, g: 182, b: 193}],\r\n        [\"pink\"                , {r: 255, g: 192, b: 203}],\r\n        [\"mistyrose\"           , {r: 255, g: 228, b: 225}]\r\n    ]);\r\n\r\n    /**\r\n     * red\r\n     */\r\n    // tslint:disable-next-line:variable-name\r\n    private _r: number = 0;\r\n\r\n    /**\r\n     * green\r\n     */\r\n    // tslint:disable-next-line:variable-name\r\n    private _g: number = 0;\r\n\r\n    /**\r\n     * blue\r\n     */\r\n    // tslint:disable-next-line:variable-name\r\n    private _b: number = 0;\r\n\r\n    /**\r\n     * alpha channel\r\n     */\r\n    // tslint:disable-next-line:variable-name\r\n    private _a: number = 1;\r\n\r\n    private static cutoff255(x: number) {\r\n        if (x < 0) return 0;\r\n        if (x > 255) return 255;\r\n        return x;\r\n    }\r\n\r\n    private static cutoff1(x: number) {\r\n        if (x < 0) return 0;\r\n        if (x > 1) return 1;\r\n        return x;\r\n    }\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    constructor(name_or_code?: string | {r: number, g: number, b: number, a?: number} | {h: number, s: number, l: number, a?: number}) {\r\n        if (! name_or_code) return;\r\n\r\n        let rgba: {r: number, g: number, b: number, a: number} = {r: 0, g: 0, b: 0, a: 1};\r\n\r\n        if (typeof name_or_code === \"object\") {\r\n            if (name_or_code.hasOwnProperty(\"r\")) {\r\n                const c2 = name_or_code as {r: number, g: number, b: number, a?: number};\r\n                rgba = {\r\n                    r: WebColor.cutoff255(c2.r),\r\n                    g: WebColor.cutoff255(c2.g),\r\n                    b: WebColor.cutoff255(c2.b),\r\n                    a: WebColor.cutoff1(c2.a || 1)\r\n                };\r\n            } else if (name_or_code.hasOwnProperty(\"h\")) {\r\n                const hsla = name_or_code as {h: number, s: number, l: number, a?: number};\r\n                rgba = WebColor.hslToRgb(hsla.h, hsla.s, hsla.l, hsla.a || 1);\r\n            }\r\n        } else if (typeof name_or_code === \"string\") {\r\n            let c: {r: number, g: number, b: number, a?: number} | {h: number, s: number, l: number, a?: number} | boolean;\r\n\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            if (c = (WebColor.isCode(name_or_code) || WebColor.isName(name_or_code) || WebColor.isRgb(name_or_code))) {\r\n                const c2 = c as {r: number, g: number, b: number, a: number};\r\n                rgba = c2;\r\n            }\r\n            // tslint:disable-next-line:no-conditional-assignment\r\n            else if (c = WebColor.isHsl(name_or_code)) {\r\n                const hsla = c as {h: number, s: number, l: number, a?: number};\r\n                rgba = WebColor.hslToRgb(hsla.h, hsla.s, hsla.l, hsla.a);\r\n            }\r\n        }\r\n\r\n        this._r = rgba.r;\r\n        this._g = rgba.g;\r\n        this._b = rgba.b;\r\n        this._a = rgba.a;\r\n    }\r\n    public static isRgb(str: string): {r: number, g: number, b: number, a: number} | boolean {\r\n        let r: number, g: number, b: number, a = 1;\r\n        let match: RegExpMatchArray | null;\r\n\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        if (match = str.match(/^\\s*rgb(a?)\\(\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*(?:,\\s*((?:[01]?\\.)?\\d+)\\s*)?\\)\\s*$/)) {\r\n            r = WebColor.cutoff255(match[2].endsWith(\"%\") ? Math.round(Number.parseFloat(match[2]) / 100 * 255) : Number.parseInt(match[2], 10));\r\n            g = WebColor.cutoff255(match[3].endsWith(\"%\") ? Math.round(Number.parseFloat(match[3]) / 100 * 255) : Number.parseInt(match[3], 10));\r\n            b = WebColor.cutoff255(match[4].endsWith(\"%\") ? Math.round(Number.parseFloat(match[4]) / 100 * 255) : Number.parseInt(match[4], 10));\r\n            if (match[1] === \"a\") {\r\n                a = WebColor.cutoff1(Number.parseFloat(match[5]));\r\n            }\r\n            return {r, g, b, a};\r\n        }\r\n        return false;\r\n    }\r\n    public static isHsl(str: string): {h: number, s: number, l: number, a: number} | boolean {\r\n        let h: number, s: number, l: number, a = 1;\r\n        let match: RegExpMatchArray | null;\r\n\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        if (match = str.match(/^\\s*hsl(a?)\\(\\s*(-?(?:\\d+\\.)?\\d+)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*(-?(?:\\d+\\.)?\\d+%?)\\s*,\\s*((?:[01]?\\.)?\\d+)\\s*\\)\\s*$/)) {\r\n            h = Number.parseFloat(match[2]) % 360;\r\n            if (h < 0) h = 360 - h;\r\n            s = WebColor.cutoff1(match[3].endsWith(\"%\") ? Math.round(Number.parseFloat(match[3]) / 100) : Number.parseFloat(match[3]));\r\n            l = WebColor.cutoff1(match[4].endsWith(\"%\") ? Math.round(Number.parseFloat(match[4]) / 100) : Number.parseFloat(match[4]));\r\n            if (match[1] === \"a\") {\r\n                a = WebColor.cutoff1(Number.parseFloat(match[5]));\r\n            }\r\n            return {h, s, l, a};\r\n        }\r\n        return false;\r\n    }\r\n    public static isCode(str: string): {r: number, g: number, b: number, a: number} | boolean {\r\n        let   r: number, g: number, b: number;\r\n        const a = 1;\r\n        let match: RegExpMatchArray | null;\r\n\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        if (match = str.match(/^\\s*#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])\\s*$/)) {\r\n            r = Number.parseInt(`${match[1]}${match[1]}`, 16);\r\n            g = Number.parseInt(`${match[2]}${match[2]}`, 16);\r\n            b = Number.parseInt(`${match[3]}${match[3]}`, 16);\r\n            return {r, g, b, a};\r\n        }\r\n        // tslint:disable-next-line:no-conditional-assignment\r\n        else if (match = str.match(/^\\s*#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})\\s*$/)) {\r\n            r = Number.parseInt(match[1], 16);\r\n            g = Number.parseInt(match[2], 16);\r\n            b = Number.parseInt(match[3], 16);\r\n            return {r, g, b, a};\r\n        }\r\n        return false;\r\n    }\r\n    public static isName(str: string): {r: number, g: number, b: number, a: number} | boolean {\r\n        if (WebColor.colorNames.has(str)) {\r\n            const c = WebColor.colorNames.get(str) as {r: number, g: number, b: number, a: number};\r\n            return {r: c.r, g: c.g, b: c.b, a: 1};\r\n        }\r\n        return false;\r\n    }\r\n    public static fromRgba(r: number, g: number, b: number, a: number = 1): WebColor {\r\n        const c = new WebColor();\r\n        c._r = WebColor.cutoff255(r);\r\n        c._g = WebColor.cutoff255(g);\r\n        c._b = WebColor.cutoff255(b);\r\n        c._a = WebColor.cutoff1(a);\r\n        return c;\r\n    }\r\n    private static hueToRgb(m1: number, m2: number, h: number): number {\r\n        if (h < 0) h += 1;\r\n        if (h > 1) h -= 1;\r\n        if (h * 6 < 1) return m1 + (m2 - m1) * h * 6;\r\n        if (h * 2 < 1) return m2;\r\n        if (h * 3 < 2) return m1 + (m2 - m1) * (2 / 3 - h) * 6;\r\n        return m1;\r\n    }\r\n    public static hslToRgb(h: number, s: number, l: number, a: number = 1): {r: number, g: number, b: number, a: number} {\r\n        // tslint:disable-next-line:ban-comma-operator\r\n        h = h % 360, s = WebColor.cutoff1(s), l = WebColor.cutoff1(l);\r\n        if (h < 0) h = 360 - h;\r\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\r\n              m1 = l * 2 - m2;\r\n        return {\r\n            r: WebColor.hueToRgb(m1, m2, h + 1 / 3),\r\n            g: WebColor.hueToRgb(m1, m2, h),\r\n            b: WebColor.hueToRgb(m1, m2, h - 1 / 3),\r\n            a: WebColor.cutoff1(a)\r\n        };\r\n    }\r\n    public static fromHsla(h: number, s: number, l: number, a: number = 1): WebColor {\r\n        // tslint:disable-next-line:ban-comma-operator\r\n        h = h % 360, s = WebColor.cutoff1(s), l = WebColor.cutoff1(l);\r\n        if (h < 0) h = 360 - h;\r\n        const  c = new WebColor();\r\n        const m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s,\r\n              m1 = l * 2 - m2;\r\n        c._r = WebColor.hueToRgb(m1, m2, h + 1 / 3);\r\n        c._g = WebColor.hueToRgb(m1, m2, h);\r\n        c._b = WebColor.hueToRgb(m1, m2, h - 1 / 3);\r\n        c._a = WebColor.cutoff1(a);\r\n        return c;\r\n    }\r\n    public static fromGray(gray: number, a: number = 1): WebColor {\r\n        const c = new WebColor();\r\n        c._r = WebColor.cutoff255(gray);\r\n        c._g = WebColor.cutoff255(gray);\r\n        c._b = WebColor.cutoff255(gray);\r\n        c._a = WebColor.cutoff1(a);\r\n        return c;\r\n    }\r\n    public get r(): number {\r\n        return this._r;\r\n    }\r\n    public get g(): number {\r\n        return this._g;\r\n    }\r\n    public get b(): number {\r\n        return this._b;\r\n    }\r\n    public get a(): number {\r\n        return this._a;\r\n    }\r\n    public toString(): string {\r\n        if (this._a !== 1) return this.toRgbaString();\r\n        else               return this.toCode();\r\n    }\r\n    public toCode(): string {\r\n        return \"#\" +\r\n            `0${this._r.toString(16)}`.slice(-2) +\r\n            `0${this._g.toString(16)}`.slice(-2) +\r\n            `0${this._b.toString(16)}`.slice(-2);\r\n    }\r\n    public toRgbString(): string {\r\n        return `rgb(${this._r},${this._g},${this._b})`;\r\n    }\r\n    public toRgbaString(): string {\r\n        return `rgb(${this._r},${this._g},${this._b},${this._a})`;\r\n    }\r\n    public toHsla(): {h: number, s: number, l: number, a: number} {\r\n        const r = this._r / 255, g = this._g / 255, b = this._b / 255;\r\n        const max = Math.max(g, b),\r\n              min = Math.min(g, b);\r\n        let   h = 0, s = 0;\r\n        const l = (max + min) / 2, c = max - min;\r\n        if (max !== min) {\r\n            if      (max === r) h = (g - b) / c;\r\n            else if (max === g) h = (b - r) / c + 2;\r\n            else                h = (r - g) / c + 4;\r\n            h = h * 60 + (h < 0 ? 360 : 0);\r\n            s = c / (l < 0.5 ? max + min : 2 - max - min);\r\n        }\r\n        return {h, s, l, a: this._a};\r\n    }\r\n    public toHslString(): string {\r\n        const c = this.toHsla();\r\n        return `hsl(${c.h},${c.s}%,${c.l}%)`;\r\n    }\r\n    public toHslaString(): string {\r\n        const c = this.toHsla();\r\n        return `hsl(${c.h},${c.s}%,${c.l}%,${this._a})`;\r\n    }\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\nexport * from './drawing/canvas/SvgCanvas';\r\nexport * from './drawing/canvas/TransferMatrix2D';\r\nexport * from './drawing/canvas/VectorCanvas2D';\r\nexport * from './drawing/canvas/WebColor';\r\n\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\n/**\r\n * Base64 encoder / decoder.\r\n */\r\nexport class Base64 {\r\n\r\n    /**\r\n     * Base64 encoder.\r\n     * @param message Plaintext message.\r\n     * @param lineLength The maximum line length of the encoded message. If set, the encoded message is split with a newline character.\r\n     * @return Base64 encoded message.\r\n     */\r\n    public static encode(message: ArrayLike<number>, lineLength?: number): string {\r\n        // A-Z: 0x00 -> 0x41\r\n        // a-z: 0x1a -> 0x61\r\n        // 0-9: 0x34 -> 0x30\r\n        //   +: 0x3e -> 0x2b\r\n        //   /: 0x3f -> 0x2f\r\n\r\n        // 0-5/6-3/4-8\r\n        let buf: number[] = [];\r\n        const n = message.length;\r\n        let   v = 0, q = 0, r = 0;\r\n\r\n        for (let i = 0, m = 0; i < n; i++) {\r\n            m = i % 3;\r\n            if (m === 0) {\r\n                v = message[i];\r\n                r = (v <<  4) & 0x30;  // 2bit\r\n                v = (v >>> 2) & 0x3f; // 6bit\r\n            }\r\n            else if (m === 1) {\r\n                v = message[i];\r\n                q =  (v <<  2) & 0x3c;        // 4bit\r\n                v = ((v >>> 4) & 0x0f) | r; // 4bit\r\n                r = q;\r\n            }\r\n            else {\r\n                q = message[i];\r\n                v = ((q >>> 6) & 0x03) | r; // 2bit\r\n                if      (v < 0x1a) v += 0x41;\r\n                else if (v < 0x34) v += 0x47;\r\n                else if (v < 0x3e) v -= 0x04;\r\n                else if (v < 0x3f) v  = 0x2b;\r\n                else               v  = 0x2f;\r\n                buf.push(v);\r\n                v = q & 0x3f; // 6bit\r\n            }\r\n            if      (v < 0x1a) v += 0x41;\r\n            else if (v < 0x34) v += 0x47;\r\n            else if (v < 0x3e) v -= 0x04;\r\n            else if (v < 0x3f) v  = 0x2b;\r\n            else               v  = 0x2f;\r\n            buf.push(v);\r\n        }\r\n\r\n        if (n % 3) {\r\n            if      (r < 0x1a) r += 0x41;\r\n            else if (r < 0x34) r += 0x47;\r\n            else if (r < 0x3e) r -= 0x04;\r\n            else if (r < 0x3f) r  = 0x2b;\r\n            else               r  = 0x2f;\r\n            buf.push(r);\r\n        }\r\n\r\n        while (buf.length % 4) {\r\n            buf.push(0x3d);\r\n        }\r\n\r\n        if (lineLength && 0 < lineLength) {\r\n            const s: number[] = [];\r\n            for (let i = 0; i < buf.length; i += lineLength) {\r\n                s.push(...buf.slice(i, i + lineLength), 0x0a);\r\n            }\r\n            buf = s;\r\n        }\r\n\r\n        let z = \"\";\r\n\r\n        for (let i = 0; i < buf.length; i++) {\r\n            // NOTE: spread operator (...buf) causes stack overflow.\r\n            z += String.fromCharCode(buf[i]);\r\n        }\r\n        return z;\r\n    }\r\n\r\n    /**\r\n     * Base64 decoder.\r\n     * @param message Base64 encoded message.\r\n     * @return Plaintext message.\r\n     */\r\n    public static decode(message: string): number[] {\r\n        const buf: number[] = [];\r\n        let   i = 0, m = 0, s = 0;\r\n        const n = message.length;\r\n        let   v = 0, r = 0;\r\n\r\n        for (; i < n; i++) {\r\n            m = (i + s) % 4;\r\n            v = message.charCodeAt(i);\r\n            if      (0x41 <= v && v <= 0x5a) v -= 0x41;\r\n            else if (0x61 <= v && v <= 0x7a) v -= 0x47;\r\n            else if (0x30 <= v && v <= 0x39) v += 0x04;\r\n            else if (v === 0x2b)             v  = 0x3e;\r\n            else if (v === 0x2f)             v  = 0x3f;\r\n            else if (v === 0x3d) {\r\n                break;\r\n            } else {\r\n                s++;\r\n                continue;\r\n            }\r\n            if (m === 0) {\r\n                r = (v << 2) & 0xfc; // 6bit\r\n            }\r\n            else if (m === 1) {\r\n                buf.push(r | ((v >>> 4) & 0x03)); // 2bit\r\n                r = (v << 4) & 0xf0; // 4bit\r\n            }\r\n            else if (m === 2) {\r\n                buf.push(r | ((v >>> 2) & 0x0f)); // 4bit\r\n                r = (v << 6) & 0xc0; // 2bit\r\n            }\r\n            else {\r\n                buf.push(r | (v & 0x3f)); // 6bit\r\n            }\r\n        }\r\n        return buf;\r\n    }\r\n\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\n/**\r\n * Escape sequences encoder.\r\n */\r\nexport class Escape {\r\n\r\n    /**\r\n     * Escape html special characters.\r\n     * @param s Plaintext.\r\n     * @return Html escaped text.\r\n     */\r\n    public static html(s: string): string {\r\n        return s\r\n            .replace(/&/g, \"&amp;\")\r\n            .replace(/</g, \"&lt;\")\r\n            .replace(/>/g, \"&gt;\")\r\n            .replace(/\"/g, \"&quot;\")\r\n            .replace(/'/g, \"&#39;\");\r\n    }\r\n\r\n    /**\r\n     * Escape xml special characters.\r\n     * @param s Plaintext.\r\n     * @return Xml escaped text.\r\n     */\r\n    public static xml(s: string): string {\r\n        return s\r\n            .replace(/&/g, \"&amp;\")\r\n            .replace(/</g, \"&lt;\")\r\n            .replace(/>/g, \"&gt;\")\r\n            .replace(/\"/g, \"&quot;\")\r\n            .replace(/'/g, \"&apos;\");\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * Escape sequences decoder.\r\n */\r\nexport class Unescape {\r\n\r\n    /**\r\n     * Unescape html character references.\r\n     * @param s Html escaped text.\r\n     * @return Plaintext.\r\n     */\r\n    public static html(s: string): string {\r\n        return s\r\n            .replace(/&#39;/g, \"'\")\r\n            .replace(/&#x(?:0{0,2})27;/ig, \"'\")\r\n            .replace(/&apos;/g, \"'\")\r\n\r\n            .replace(/&#34;/g, \"\\\"\")\r\n            .replace(/&#x(?:0{0,2})22;/ig, \"\\\"\")\r\n            .replace(/&quot;/g, \"\\\"\")\r\n\r\n            .replace(/&#62;/g, \">\")\r\n            .replace(/&#x(?:0{0,2})3e;/ig, \">\")\r\n            .replace(/&gt;/g, \">\")\r\n\r\n            .replace(/&#60;/g, \"<\")\r\n            .replace(/&#x(?:0{0,2})3c;/ig, \"<\")\r\n            .replace(/&lt;/g, \"<\")\r\n\r\n            .replace(/&#38;/g, \"&\")\r\n            .replace(/&#x(?:0{0,2})26;/ig, \"&\")\r\n            .replace(/&amp;/g, \"&\");\r\n    }\r\n\r\n    /**\r\n     * Unescape xml character references.\r\n     * @param s Xml escaped text.\r\n     * @return Plaintext.\r\n     */\r\n    public static xml(s: string): string {\r\n        return Escape.html(s);\r\n    }\r\n\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\n/**\r\n * Number precision / significant figure\r\n */\r\nexport class NumberPrecision {\r\n    public static decimalPlaces(n: number): (v: number) => number {\r\n        return (v: number) => {\r\n            return Number(v.toFixed(n));\r\n        };\r\n    }\r\n\r\n    public static precision(n: number): (v: number) => number {\r\n        return (v: number) => {\r\n            return Number(v.toPrecision(n));\r\n        };\r\n    }\r\n}\r\n","// src/convert/TextEncoding.ts#__encodeToUtf8Impl\r\n//\r\n// Original Author:\r\n// http://qiita.com/ukyo/items/1626defd020b2157e6bf\r\n// (c) 2012 ukyo (http://qiita.com/ukyo, https://ukyoweb.com)\r\n\r\n// src/convert/TextEncoding.ts#__decodeUtf8Impl\r\n//\r\n// Original Author:\r\n// http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\r\n// utf.js - UTF-8 <=> UTF-16 convertion\r\n// Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\r\n// Version: 1.0\r\n// LastModified: Dec 25 1999\r\n// This library is free.  You can redistribute it and/or modify it.\r\n\r\n// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\ninterface TextEncoder {\r\n    encoding: string; // readonly\r\n    encode(input?: string): Uint8Array;\r\n}\r\n\r\ndeclare var TextEncoder: {\r\n    prototype: TextEncoder;\r\n    new (utfLabel?: string): TextEncoder;\r\n};\r\n\r\n\r\ninterface TextDecoder {\r\n    encoding: string;\r\n    fatal: boolean;\r\n    ignoreBOM: boolean;\r\n    decode(input?: any, options?: object): string;\r\n}\r\n\r\ndeclare var TextDecoder: {\r\n    prototype: TextDecoder;\r\n    new (label?: string, options?: object): TextDecoder;\r\n};\r\n\r\n\r\n\r\nexport class TextEncoding {\r\n    private static isNode: boolean;\r\n    private static isTextEncoder: boolean;\r\n    private static utf8Encoder: TextEncoder;\r\n    private static utfDecoder: TextDecoder;\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    private static __encodeToUtf8: (str: string) => Uint8Array;\r\n\r\n    // tslint:disable-next-line:variable-name\r\n    private static __decodeUtf8: (buf: ArrayLike<number>) => string;\r\n\r\n    /** static constructor */\r\n    // tslint:disable-next-line:variable-name\r\n    private static __ctor = (() => {\r\n        TextEncoding.isNode = (typeof Buffer !== \"undefined\");\r\n        TextEncoding.isTextEncoder = (typeof TextEncoder !== \"undefined\");\r\n\r\n        if (TextEncoding.isNode) {\r\n            TextEncoding.__encodeToUtf8 = (str: string) => Buffer.from(str, \"utf8\");\r\n            TextEncoding.__decodeUtf8 = (buf: ArrayLike<number>) => Buffer.from(Array.isArray(buf) ? buf : Array.from(buf)).toString(\"utf8\");\r\n        } else if (TextEncoding.isTextEncoder) {\r\n            TextEncoding.utf8Encoder = new TextEncoder(\"utf8\");\r\n            TextEncoding.__encodeToUtf8 = (str: string) => TextEncoding.utf8Encoder.encode(str);\r\n            TextEncoding.utfDecoder = new TextDecoder(\"utf8\");\r\n            TextEncoding.__decodeUtf8 = (buf: ArrayLike<number>) => TextEncoding.utfDecoder.decode(buf);\r\n        } else {\r\n            TextEncoding.__encodeToUtf8 = TextEncoding.__encodeToUtf8Impl;\r\n            TextEncoding.__decodeUtf8 = TextEncoding.__decodeUtf8Impl;\r\n        }\r\n    })();\r\n\r\n    public static encodeToUtf8(str: string): Uint8Array {\r\n        return TextEncoding.__encodeToUtf8(str);\r\n    }\r\n\r\n    public static decodeUtf8(buf: ArrayLike<number>): string {\r\n        return TextEncoding.__decodeUtf8(buf);\r\n    }\r\n\r\n    private static __encodeToUtf8Impl(str: string): Uint8Array {\r\n\r\n        // Original Author:\r\n        // http://qiita.com/ukyo/items/1626defd020b2157e6bf\r\n        // (c) 2012 ukyo (http://qiita.com/ukyo, https://ukyoweb.com)\r\n\r\n        // NOTE: We have modified from original source.\r\n\r\n        const n = str.length;\r\n        let idx = -1,\r\n            byteLength = 512,\r\n            bytes = new Uint8Array(byteLength),\r\n            i: number, c: number;\r\n\r\n        for (i = 0; i < n; ++i) {\r\n            // surrogate pairs (U+D800..U+DFFF) should be decoded to U+010000..U+10FFFF\r\n            // before convert to UTF-8.\r\n            const cp = str.codePointAt(i);\r\n            if (cp === void 0) {\r\n                throw new Error(\"Can't convert string to UTF-8. string include unexpected sequence.\");\r\n            }\r\n            c = cp;\r\n            if (c <= 0x7F) {\r\n                bytes[++idx] = c;\r\n            } else if (c <= 0x7FF) {\r\n                bytes[++idx] = 0xC0 | (c >>>  6)         ;\r\n                bytes[++idx] = 0x80 | (c & 0x3F)         ;\r\n            } else if (c <= 0xFFFF) {\r\n                bytes[++idx] = 0xE0 |  (c >>> 12)        ;\r\n                bytes[++idx] = 0x80 | ((c >>>  6) & 0x3F);\r\n                bytes[++idx] = 0x80 |  (c & 0x3F)        ;\r\n            } else if (c <= 0x10FFFF) {\r\n                // UTF-8 4bytes range is (0x010000..0x1FFFFF) but Unicode codepoint uses <= U+10FFFF.\r\n                bytes[++idx] = 0xF0 |  (c >>> 18)        ;\r\n                bytes[++idx] = 0x80 | ((c >>> 12) & 0x3F);\r\n                bytes[++idx] = 0x80 | ((c >>>  6) & 0x3F);\r\n                bytes[++idx] = 0x80 |  (c & 0x3F)        ;\r\n                if (0x010000 <= c) ++i;\r\n            } else {\r\n                throw new Error(\"Can't convert string to UTF-8. string include unexpected sequence.\");\r\n            }\r\n            if (byteLength - idx <= 4) {\r\n                // tslint:disable-next-line:variable-name\r\n                const _bytes = bytes;\r\n                byteLength *= 2;\r\n                bytes = new Uint8Array(byteLength);\r\n                bytes.set(_bytes);\r\n            }\r\n        }\r\n        return bytes.subarray(0, ++idx);\r\n    }\r\n\r\n    private static __decodeUtf8Impl(buf: ArrayLike<number>): string {\r\n\r\n        // Original Author:\r\n        // http://www.onicos.com/staff/iz/amuse/javascript/expert/utf.txt\r\n        // utf.js - UTF-8 <=> UTF-16 convertion\r\n        // Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\r\n        // Version: 1.0\r\n        // LastModified: Dec 25 1999\r\n        // This library is free.  You can redistribute it and/or modify it.\r\n\r\n        // NOTE: We have modified from original source.\r\n\r\n        let   out = \"\", i = 0;\r\n        const len = buf.length;\r\n        let c: number, char2: number, char3: number, char4: number;\r\n\r\n        while (i < len) {\r\n            c = buf[i++];\r\n            switch (c >>> 4) {\r\n            case 0: case 1: case 2: case 3: case 4: case 5: case 6: case 7:\r\n                // 0xxx xxxx    ( 7bit)\r\n                out += String.fromCodePoint(c);\r\n                break;\r\n            case 12: case 13:\r\n                // 110x xxxx,  10xx xxxx    (11bit)\r\n                char2 = buf[i++];\r\n                out += String.fromCodePoint(\r\n                        ((c     & 0x1F) << 6) |\r\n                         (char2 & 0x3F)\r\n                        );\r\n                break;\r\n            case 14:\r\n                // 1110 xxxx,  10xx xxxx,  10xx xxxx    (16bit)\r\n                char2 = buf[i++];\r\n                char3 = buf[i++];\r\n                out += String.fromCodePoint(\r\n                        ((c     & 0x0F) << 12) |\r\n                        ((char2 & 0x3F) <<  6) |\r\n                        ((char3 & 0x3F) <<  0)\r\n                        );\r\n                break;\r\n            case 16:\r\n                // 1111 0xxx,  10xx xxxx,  10xx xxxx,  10xx xxxx                            (21bit)\r\n                // 1111 10xx,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx                (26bit; invalid Unicode codepoint)\r\n                // 1111 110x,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx,  10xx xxxx    (31bit; invalid Unicode codepoint)\r\n                if ((c >>> 3) & 1) {\r\n                    throw new Error(\"Can't convert UTF-8 to string. UTF-8 include unexpected sequence.\");\r\n                }\r\n                char2 = buf[i++];\r\n                char3 = buf[i++];\r\n                char4 = buf[i++];\r\n                out += String.fromCodePoint(\r\n                        ((c     & 0x07) << 18) |\r\n                        ((char2 & 0x3F) << 12) |\r\n                        ((char3 & 0x3F) <<  6) |\r\n                        ((char4 & 0x3F) <<  0)\r\n                        );\r\n                break;\r\n            }\r\n        }\r\n\r\n        return out;\r\n    }\r\n}\r\n","// Copyright (c) 2017, Shellyl_N and Authors\r\n// license: ISC\r\n// https://github.com/shellyln\r\n\r\n\r\n\r\nexport class WordWrap {\r\n\r\n    public static loose(str: string, charsPerLine: number = 120): string {\r\n        let r = \"\";\r\n        let i = 0;\r\n        for (const c of str) {\r\n            i++;\r\n            if (i >= charsPerLine && \" \\f\\t\\v\".indexOf(c) > -1) {\r\n                r += \"\\n\";\r\n                i = 0;\r\n            } else {\r\n                r += c;\r\n            }\r\n        }\r\n        return r;\r\n    }\r\n\r\n    public static normal(str: string, charsPerLine: number = 120): string {\r\n        // TODO: not implemented.\r\n        //       do normal word-wrap.\r\n        return WordWrap.loose(str, charsPerLine);\r\n    }\r\n\r\n    public static force(str: string, charsPerLine: number = 120): string {\r\n        // TODO: not implemented.\r\n        //       do break-word word-wrap.\r\n        return WordWrap.loose(str, charsPerLine);\r\n    }\r\n\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { SvgCanvas,\n         Rect2D,\n         SvgCanvas2DGradient } from 'red-agate-svg-canvas/modules';\n\n// tslint:disable-next-line:function-constructor\nconst g = Function('return this')();\n\nexport default function(ChartJs, opts, width, height)\n{\n    if(undefined === width)\n            width = 800;\n    if(undefined === height)\n            height = 400;\n\n    // SvgCanvas has a \"CanvasRenderingContext2D\"-compatible interface.\n    const ctx = new SvgCanvas();\n\n    // SvgCanvas lacks the canvas property.\n    ctx.canvas = {\n        width,\n        height,\n        style: {\n            width: `${width}px`,\n            height: `${height}400px`,\n        },\n    };\n\n    //TypeError: ctx.resetTransform is not a function\n    ctx.resetTransform = function(){}\n\n    // SvgCanvas does not have font glyph information,\n    // so manually set the ratio of (font height / font width).\n    ctx.fontHeightRatio = 2;\n\n    // Chart.js needs a \"HTMLCanvasElement\"-like interface that has \"getContext()\" method.\n    // \"getContext()\" should returns a \"CanvasRenderingContext2D\"-compatible interface.\n    const el = { getContext: () => ctx };\n\n    if(undefined === opts.options)\n        opts.options = {};\n\n    // If \"devicePixelRatio\" is not set, Chart.js get the devicePixelRatio from \"window\" object.\n    // node.js environment has no window object.\n    opts.options.devicePixelRatio = 1;\n\n    // Disable animations.\n    opts.options.animation = false;\n    opts.options.events = [];\n    opts.options.responsive = false;\n\n    // Chart.js needs the \"CanvasGradient\" in the global scope.\n    const savedGradient = g.CanvasGradient;\n    g.CanvasGradient = SvgCanvas2DGradient;\n    try {\n        const chart = new ChartJs.Chart(el, opts);\n    } finally {\n        if (savedGradient) {\n            g.CanvasGradient = savedGradient;\n        }\n    }\n\n    // Render as SVG.\n    const svgString = ctx.render(new Rect2D(0, 0 , width, height), 'px');\n    \n    return svgString;\n}\n\n"],"names":["TextEncoding","Base64","Escape","WordWrap","WebColor","Point2D","Vector2D","TransferMatrix2D","SvgCanvasImageData","constructor","url","x","y","width","height","SvgCanvas2DGradient","SvgCanvas2DLinerGradient","id","x0","y0","x1","y1","content","addColorStop","offset","color","opacity","toDef","toString","SvgCanvas2DRadialGradient","cx","cy","r","fx","fy","SvgCanvas2DPattern","imageData","SvgCanvasGraphicState","src","key","hasOwnProperty","subpath","Array","from","SvgCanvas","graphicsStack","push","globalAlpha","length","value","globalCompositeOperation","filterIdUrl","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","font","textAlign","textBaseline","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","strokeStyle","fillStyle","ctm","currentPoint","currentPointOnCtm","lineDash","clipPath","subpathIsEmptyOrClosed","fromTemplate","template","c","idCount","Date","getTime","render","viewbox","unit","svgns","xlinkns","vbox","w","h","defs","assets","map","join","contentSaved","tmpl","replace","re","test","match","toDataUrl","lineLength","encode","encodeToUtf8","save","s","restore","restorePath","pop","cpt","cptoctm","scale","tm","transfer","translate","rotate","angle","transform","m11","m12","m21","m22","dx","dy","concat","setTransform","beginPath","closePath","moveTo","p","lineTo","extra","i","quadraticCurveTo","cpx","cpy","bezierCurveTo","cp1x","cp1y","cp2x","cp2y","arc","radius","startAngle","endAngle","anticlockwise","entired","Math","abs","PI","PI_2","k0","sqrt","tm0","points","k1","tan","cos","sin","reverse","pt","shift","arcTo","x2","y2","p0","p1","p2","v1","fromPoints","v2","isZero","arcAngle","getAngle","linesAngle","a","b","vang1","vang2","cp1","cp2","center","vcp1","vcp2","angcp1","angcp2","circle","rect","roundRect","getInheritedStyle","style","found","styleStr","alpha","isRgb","rgba","g","isHsl","hsla","l","isIdentity","getStrokeAttrs","styleAndAlpha","getLineDash","getFillAttrs","fillRule","getFilterAttrs","merge","op","getMultilineTextHeight","multiline","lineHeight","RegExp","exec","fontSizePx","Number","getTextFontStyles","xml","getTextAttributes","maxWidthOrExtraAttrs","textLength","lengthAdjust","writingMode","glyphOrientationVertical","glyphOrientationHorizontal","direction","unicodeBidi","textDecoration","kerning","letterSpacing","wordSpacing","getTextPath","textPath","inv","getInverse","v","loose","textPathOffset","convertToMultiline","text","split","stroke","strokeRect","strokeText","path","fill","fillRect","fillText","fillStroke","fillStrokeRect","fillStrokeText","setLineDash","segments","clip","registerImage","img","convertImageToSvgImageData","imgId","registerCustomFilter","markup","registerCustomAsset","appendCustomContent","createLinearGradient","createRadialGradient","fr","createPattern","repetition","beginPattern","endPattern","HTMLImageElement","document","createElement","ctx","getContext","Error","drawImage","toDataURL","HTMLCanvasElement","canvasOffsetX","canvasOffsetY","canvasImageWidth","canvasImageHeight","startsWith","beginGroup","endGroup","fontHeightRatio","_fontHeightRatio","measureText","size","parseFloat","round","normalize","clearRect","NumberPrecision","dp","decimalPlaces","getLength","acos","vlen1","vlen2","Rect2D","m11_or_src","skewX","skewY","mat","x_or_p","name_or_code","c2","cutoff255","cutoff1","hslToRgb","isCode","isName","_r","_g","_b","_a","str","endsWith","parseInt","colorNames","has","get","fromRgba","hueToRgb","m1","m2","fromHsla","fromGray","gray","toRgbaString","toCode","slice","toRgbString","toHsla","max","min","toHslString","toHslaString","Map","message","buf","n","q","m","z","String","fromCharCode","decode","charCodeAt","html","Unescape","toFixed","precision","toPrecision","__encodeToUtf8","decodeUtf8","__decodeUtf8","__encodeToUtf8Impl","idx","byteLength","bytes","Uint8Array","cp","codePointAt","_bytes","set","subarray","__decodeUtf8Impl","out","len","char2","char3","char4","fromCodePoint","isNode","Buffer","isTextEncoder","TextEncoder","isArray","utf8Encoder","utfDecoder","TextDecoder","charsPerLine","indexOf","normal","force","Function","ChartJs","opts","undefined","canvas","resetTransform","el","options","devicePixelRatio","animation","events","responsive","savedGradient","CanvasGradient","chart","Chart","svgString"],"sourceRoot":""}